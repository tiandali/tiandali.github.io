<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT" />










<meta property="og:type" content="website">
<meta property="og:title" content="tiandali">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="tiandali">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="tiandali">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>tiandali</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">tiandali</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/22/放大镜案例/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tiandali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tiandali">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/22/放大镜案例/" itemprop="url">放大镜案例</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-22T14:16:43+08:00">
                2018-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="放大镜案例"><a href="#放大镜案例" class="headerlink" title="放大镜案例"></a>放大镜案例</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        .container&#123;</span></span><br><span class="line"><span class="undefined">            margin: 20px auto;</span></span><br><span class="line"><span class="undefined">            width: 650px;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        .smallBox&#123;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            position: relative;</span></span><br><span class="line"><span class="undefined">            width: 300px;</span></span><br><span class="line"><span class="undefined">            height: 300px;</span></span><br><span class="line"><span class="undefined">            overflow: hidden;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        .smallBox img&#123;</span></span><br><span class="line"><span class="undefined">            display: block;</span></span><br><span class="line"><span class="undefined">            width: 100%;</span></span><br><span class="line"><span class="undefined">            height: 100%;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        .smallBox .mark&#123;</span></span><br><span class="line"><span class="undefined">            position: absolute;</span></span><br><span class="line"><span class="undefined">            top: 0;</span></span><br><span class="line"><span class="undefined">            left: 0;</span></span><br><span class="line"><span class="undefined">            width: 100px;</span></span><br><span class="line"><span class="undefined">            height: 100px;</span></span><br><span class="line"><span class="undefined">            z-index:10;</span></span><br><span class="line"><span class="undefined">            background: rgba(255,0,0,.3);</span></span><br><span class="line"><span class="undefined">            cursor: move;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        .bigBox&#123;</span></span><br><span class="line"><span class="undefined">            position: relative;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            display: none;</span></span><br><span class="line"><span class="undefined">            width: 350px;</span></span><br><span class="line"><span class="undefined">            height: 350px;</span></span><br><span class="line"><span class="undefined">            overflow: hidden;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        .bigBox img&#123;</span></span><br><span class="line"><span class="undefined">            position: absolute;</span></span><br><span class="line"><span class="undefined">            top: 0;</span></span><br><span class="line"><span class="undefined">            left: 0;</span></span><br><span class="line"><span class="undefined">            display: block;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            /*width: 1050px;*/</span></span><br><span class="line"><span class="undefined">            height: 1050px;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container clearfix"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"smallBox"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/1.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;div class="mark"&gt;&lt;/div&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"bigBox"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"img/2.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> container=<span class="built_in">document</span>.querySelector(<span class="string">'.container'</span>),</span></span><br><span class="line"><span class="javascript">        smallBox=container.querySelector(<span class="string">'.smallBox'</span>),</span></span><br><span class="line"><span class="javascript">        bigBox=container.querySelector(<span class="string">'.bigBox'</span>),</span></span><br><span class="line"><span class="javascript">        bigImg=bigBox.querySelector(<span class="string">'img'</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> mark=<span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">    smallBox.onmouseenter=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(!mark)&#123;</span></span><br><span class="line"><span class="javascript">     mark=<span class="built_in">document</span>.createElement(<span class="string">'div'</span>);</span></span><br><span class="line"><span class="javascript">        mark.className=<span class="string">'mark'</span>;</span></span><br><span class="line"><span class="undefined">        smallBox.appendChild(mark);</span></span><br><span class="line"><span class="javascript">        bigBox.style.display=<span class="string">'block'</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="javascript">    smallBox.onmousemove=<span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(!mark)<span class="keyword">return</span>;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//鼠标在盒子中间计算的left和top值</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> curL=ev.pageX-smallBox.offsetLeft-mark.offsetWidth/<span class="number">2</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> curT=ev.pageY-smallBox.offsetTop-mark.offsetHeight/<span class="number">2</span>;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//计算出来的值不能超过边界；</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> minL=<span class="number">0</span>,</span></span><br><span class="line"><span class="undefined">            minT=0,</span></span><br><span class="line"><span class="undefined">            maxL=smallBox.offsetWidth-mark.offsetWidth,</span></span><br><span class="line"><span class="undefined">            maxT=smallBox.offsetHeight-mark.offsetHeight;</span></span><br><span class="line"><span class="xml">        curL=curL<span class="tag">&lt;<span class="name">minL?minL:(curL</span>&gt;</span>maxL?maxL:curL);</span></span><br><span class="line"><span class="xml">        curT=curT<span class="tag">&lt;<span class="name">minT?minT:(curT</span>&gt;</span>maxT?maxT:curT);</span></span><br><span class="line"><span class="javascript">        mark.style.left=curL+<span class="string">'px'</span>;</span></span><br><span class="line"><span class="javascript">        mark.style.top=curT+<span class="string">'px'</span>;</span></span><br><span class="line"><span class="javascript">        bigImg.style.left=-curL*<span class="number">3.5</span>+<span class="string">'px'</span>;</span></span><br><span class="line"><span class="javascript">        bigImg.style.top=-curT*<span class="number">3.5</span>+<span class="string">'px'</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="javascript">    smallBox.onmouseleave=<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span>(mark)&#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">this</span>.removeChild(mark);</span></span><br><span class="line"><span class="javascript">            mark=<span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">            bigBox.style.display=<span class="string">'none'</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/22/拖拽案例/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tiandali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tiandali">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/22/拖拽案例/" itemprop="url">弹性盒子案例拖拽</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-22T14:16:02+08:00">
                2018-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="拖拽（模态框）"><a href="#拖拽（模态框）" class="headerlink" title="拖拽（模态框）"></a>拖拽（模态框）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;/title&gt;</span><br><span class="line">    &lt;link rel=&quot;stylesheet&quot; href=&quot;../../reset.min.css&quot;&gt;</span><br><span class="line">    &lt;style type=&quot;text/css&quot;&gt;</span><br><span class="line">        html, body &#123;</span><br><span class="line">            height: 500%;</span><br><span class="line">            -webkit-user-select :none;</span><br><span class="line">        &#125;</span><br><span class="line">        .dialogMark &#123;</span><br><span class="line">            position: fixed;</span><br><span class="line">            top: 0;</span><br><span class="line">            left: 0;</span><br><span class="line">            z-index: 100;</span><br><span class="line">            width: 100%;</span><br><span class="line">            height: 100%;</span><br><span class="line">            background: rgba(0, 0, 0, .3);</span><br><span class="line">        &#125;</span><br><span class="line">        .diaLogBox &#123;</span><br><span class="line">            /*控制盒子在中间我们最好在js中实现，经过精密的计算，计算出具体的top和left而不是模糊的百分比这样我们在js中通过*/</span><br><span class="line">            width: 200px;</span><br><span class="line">            position: fixed;</span><br><span class="line">            height: 300px;</span><br><span class="line">            background: #FFF;</span><br><span class="line">            z-index: 101;</span><br><span class="line">            overflow: hidden;</span><br><span class="line">        &#125;</span><br><span class="line">        .diaLogBox h3 &#123;</span><br><span class="line">            position: relative;</span><br><span class="line">            padding: 0 10px;</span><br><span class="line">            height: 50px;</span><br><span class="line">            line-height: 50px;</span><br><span class="line">            background: #DDD;</span><br><span class="line">            border-bottom: 1px solid #aaaaaa;</span><br><span class="line">            cursor: move;</span><br><span class="line">        &#125;</span><br><span class="line">        .diaLogBox h3 i &#123;</span><br><span class="line">            position: absolute;</span><br><span class="line">            right: 10px;</span><br><span class="line">            top: 50%;</span><br><span class="line">            margin-top: -10px;</span><br><span class="line">            width: 20px;</span><br><span class="line">            height: 20px;</span><br><span class="line">            line-height: 20px;</span><br><span class="line">            text-align: center;</span><br><span class="line">            font-size: 16px;</span><br><span class="line">            color: #E01D20;</span><br><span class="line">            font-style: normal;</span><br><span class="line">            font-family: &quot;Microsoft JhengHei&quot;;</span><br><span class="line">            background: lightgoldenrodyellow;</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;!--dialog：模态框--&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;dialogMark&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;diaLogBox&quot; id=&quot;diaLogBox&quot;&gt;</span><br><span class="line">    &lt;h3 class=&quot;title&quot;&gt;大力出奇迹</span><br><span class="line">         &lt;i class=&quot;closeBtn&quot;&gt;X&lt;/i&gt;</span><br><span class="line">    &lt;/h3&gt;</span><br><span class="line">    &lt;div class=&quot;con&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    let dialogRender = (function () &#123;</span><br><span class="line">        let diaLogBox = document.getElementById(&apos;diaLogBox&apos;);</span><br><span class="line">        let title = diaLogBox.getElementsByTagName(&apos;h3&apos;)[0];</span><br><span class="line">         let closeBtn=diaLogBox.getElementsByTagName(&apos;i&apos;)[0];</span><br><span class="line">        let winW = document.documentElement.clientWidth || document.body.clientWidth;</span><br><span class="line">        let winH = document.documentElement.clientHeight || document.body.clientHeight;</span><br><span class="line"></span><br><span class="line">        let maxL = winW - diaLogBox.offsetWidth;</span><br><span class="line">        let maxT = winH - diaLogBox.offsetHeight;</span><br><span class="line">        let Down = function (ev) &#123;</span><br><span class="line">            console.log(1);</span><br><span class="line">            ev = ev || window.event;</span><br><span class="line">            //记录鼠标起始位置&amp;&amp;盒子的起始位置</span><br><span class="line">            this.strX = ev.clientX;</span><br><span class="line">            this.strY = ev.clientY;</span><br><span class="line">            this.strL = diaLogBox.offsetLeft;</span><br><span class="line">            this.strT = diaLogBox.offsetTop;</span><br><span class="line">            //谷歌下不兼容，用setCapture，releaseCapture解决鼠标焦点丢失问题</span><br><span class="line">            if(this.setCapture)&#123;</span><br><span class="line">                this.onmousemove=Move;</span><br><span class="line">                this.onmouseup=Up;</span><br><span class="line">                this.setCapture();</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            //按下代表拖拽开始，会有鼠标丢失的问题，</span><br><span class="line">//            this.onmousemove=Move;</span><br><span class="line">//            this.onmouseup=Up;</span><br><span class="line">            //解决方法：</span><br><span class="line">            //用document解决鼠标焦点丢失问题</span><br><span class="line">            //let _this = this;</span><br><span class="line">            document.onmousemove = (ev) =&gt; &#123;</span><br><span class="line">                Move.call(this,ev);</span><br><span class="line">            &#125;;</span><br><span class="line">            document.onmouseup = (ev) =&gt; &#123;</span><br><span class="line">                Up.call(this,ev);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        let Move = function (ev) &#123;</span><br><span class="line">//            console.log(this);</span><br><span class="line">            ev = ev || window.event;</span><br><span class="line">            let curL = ev.clientX - this.strX + this.strL;</span><br><span class="line">            let curT = ev.clientY - this.strY + this.strT;</span><br><span class="line"></span><br><span class="line">            console.log(curT, ev.clientY, this.strY, this.strT);</span><br><span class="line">            //边界处理</span><br><span class="line">            curL = curL &lt; 0 ? 0 : (curL &gt; maxL ? maxL : curL);</span><br><span class="line">            curT = curT &lt; 0 ? 0 : (curT &gt; maxT ? maxT : curT);</span><br><span class="line">            console.log(curT);</span><br><span class="line">            diaLogBox.style.left = curL + &apos;px&apos;;</span><br><span class="line">            diaLogBox.style.top = curT + &apos;px&apos;;</span><br><span class="line"></span><br><span class="line">            console.log(diaLogBox.style.top);</span><br><span class="line">        &#125;;</span><br><span class="line">        let Up = function (ev) &#123;</span><br><span class="line">           //谷歌下不兼容，用setCapture，releaseCapture解决鼠标焦点丢失问题</span><br><span class="line">            if(this.setCapture)&#123;</span><br><span class="line">                this.onmousemove=null;</span><br><span class="line">                this.onmouseup=null;</span><br><span class="line">                this.releaseCapture();</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            //用document解决鼠标焦点丢失问题</span><br><span class="line">            document.onmousemove = null;</span><br><span class="line">            document.onmouseup = null;</span><br><span class="line">        &#125;;</span><br><span class="line">        </span><br><span class="line">  closeBtn.onclick=function () &#123;</span><br><span class="line">            diaLogBox.style.display=&apos;none&apos;;</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        return &#123;</span><br><span class="line">            init: function () &#123;</span><br><span class="line">                //让盒子处于页面中间</span><br><span class="line">                diaLogBox.style.left = maxL / 2 + &apos;px&apos;;</span><br><span class="line">                diaLogBox.style.top = maxT / 2 + &apos;px&apos;;</span><br><span class="line">                title.onmousedown = Down;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)();</span><br><span class="line">    dialogRender.init();</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/22/弹性盒子案例/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tiandali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tiandali">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/22/弹性盒子案例/" itemprop="url">弹性盒子案例</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-22T14:15:51+08:00">
                2018-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="好玩的弹性动画"><a href="#好玩的弹性动画" class="headerlink" title="好玩的弹性动画"></a>好玩的弹性动画</h3><h4 id="弹性盒子"><a href="#弹性盒子" class="headerlink" title="弹性盒子"></a>弹性盒子</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../../reset.min.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        html, body &#123;</span></span><br><span class="line"><span class="undefined">            width: 100%;</span></span><br><span class="line"><span class="undefined">            height: 100%;</span></span><br><span class="line"><span class="undefined">            overflow: hidden;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        #box &#123;</span></span><br><span class="line"><span class="undefined">            position: absolute;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            height: 200px;</span></span><br><span class="line"><span class="undefined">            top: 100px;</span></span><br><span class="line"><span class="undefined">            left: 100px;</span></span><br><span class="line"><span class="undefined">            background: red;</span></span><br><span class="line"><span class="undefined">            cursor: move;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"box"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"发布订阅subscribe.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> box = <span class="built_in">document</span>.querySelector(<span class="string">'#box'</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> subscribeDown = <span class="keyword">new</span> Subscribe();</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> subscribeMove = <span class="keyword">new</span> Subscribe();</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> subscribeUp = <span class="keyword">new</span> Subscribe();</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> down = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.strX = ev.clientX;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.strY = ev.clientY;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.strT = <span class="keyword">this</span>.offsetTop;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.strL = <span class="keyword">this</span>.offsetLeft;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//解决鼠标焦点丢失</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.MOVE = move.bind(<span class="keyword">this</span>);</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.UP = up.bind(<span class="keyword">this</span>);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.addEventListener(<span class="string">'mousemove'</span>, <span class="keyword">this</span>.MOVE);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.addEventListener(<span class="string">'mouseup'</span>, <span class="keyword">this</span>.UP);</span></span><br><span class="line"><span class="javascript">        subscribeDown.fire(<span class="keyword">this</span>, ev);</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> move = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.curL = ev.clientX - <span class="keyword">this</span>.strX + <span class="keyword">this</span>.strL;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.curT = ev.clientY - <span class="keyword">this</span>.strY + <span class="keyword">this</span>.strT;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.style.left = <span class="keyword">this</span>.curL + <span class="string">'px'</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">this</span>.style.top = <span class="keyword">this</span>.curT + <span class="string">'px'</span>;</span></span><br><span class="line"><span class="javascript">        subscribeMove.fire(<span class="keyword">this</span>, ev)</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> up = <span class="function"><span class="keyword">function</span> (<span class="params">ev</span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        <span class="comment">//抬起清除事件</span></span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.removeEventListener(<span class="string">'mousemove'</span>, <span class="keyword">this</span>.MOVE);</span></span><br><span class="line"><span class="javascript">        <span class="built_in">document</span>.removeEventListener(<span class="string">'mouseup'</span>, <span class="keyword">this</span>.UP);</span></span><br><span class="line"><span class="javascript">        subscribeUp.fire(<span class="keyword">this</span>, ev);</span></span><br><span class="line"><span class="undefined">    &#125;;</span></span><br><span class="line"><span class="undefined">    box.onmousedown = down;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">    subscribeMove.add(<span class="function">(<span class="params">curEle, ev</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">if</span> (!curEle.lastFly) &#123;</span></span><br><span class="line"><span class="undefined">            curEle.lastFly = curEle.offsetLeft;</span></span><br><span class="line"><span class="undefined">            curEle.speedFly = 0;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">return</span>;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        curEle.speedFly = curEle.offsetLeft - curEle.lastFly;</span></span><br><span class="line"><span class="undefined">        curEle.lastFly = curEle.offsetLeft;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="javascript">    subscribeUp.add(<span class="function">(<span class="params">curEle, ev</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> minL = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> maxL = <span class="built_in">document</span>.documentElement.clientWidth - curEle.offsetWidth;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> speed = curEle.speedFly;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> dir = <span class="string">'right'</span>;</span></span><br><span class="line"><span class="javascript">        speed &lt; <span class="number">0</span> ? dir = <span class="string">'left'</span> : <span class="literal">null</span>;</span></span><br><span class="line"><span class="javascript">        speed = <span class="built_in">Math</span>.abs(speed);</span></span><br><span class="line"><span class="javascript">        curEle.flyTimer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (speed &lt; <span class="number">0.5</span>) &#123;</span></span><br><span class="line"><span class="undefined">                clearInterval(curEle.flyTimer);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span>;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            speed *= 0.98;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> curL = curEle.offsetLeft;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (dir === <span class="string">'right'</span>) &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (curL &gt;= maxL) &#123;</span></span><br><span class="line"><span class="javascript">                    curEle.style.left = maxL + <span class="string">'px'</span>;</span></span><br><span class="line"><span class="javascript">                    dir = <span class="string">'left'</span>;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                curL += speed;</span></span><br><span class="line"><span class="javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">if</span> (curL &lt;= minL) &#123;</span></span><br><span class="line"><span class="javascript">                    curEle.style.left = minL + <span class="string">'px'</span>;</span></span><br><span class="line"><span class="javascript">                    dir = <span class="string">'right'</span>;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">return</span>;</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">                curL -= speed;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="javascript">            curEle.style.left = curL + <span class="string">'px'</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;, 17);</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="javascript">    subscribeDown.add(<span class="function">(<span class="params">curEle, ev</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="undefined">        clearInterval(curEle.flyTimer);</span></span><br><span class="line"><span class="undefined">        curEle.speedFly = 0;</span></span><br><span class="line"><span class="undefined">        clearInterval(curEle.dropTimer);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="javascript">    subscribeUp.add(<span class="function">(<span class="params">curEle, ev</span>) =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> speed = <span class="number">9.8</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> minT = <span class="number">0</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> maxT = <span class="built_in">document</span>.documentElement.clientHeight - curEle.offsetHeight;</span></span><br><span class="line"><span class="undefined">        flag = 0;</span></span><br><span class="line"><span class="javascript">        curEle.dropTimer = setInterval(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (flag &gt; <span class="number">1</span>) &#123;</span></span><br><span class="line"><span class="undefined">                clearInterval(curEle.dropTimer);</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span>;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">            speed += 9.8;</span></span><br><span class="line"><span class="undefined">            speed *= 0.98;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">let</span> curT = curEle.offsetTop;</span></span><br><span class="line"><span class="undefined">            curT += speed;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (curT &gt;= maxT) &#123;</span></span><br><span class="line"><span class="javascript">                curEle.style.top = maxT + <span class="string">'px'</span>;</span></span><br><span class="line"><span class="undefined">                speed *= -1;</span></span><br><span class="line"><span class="javascript">                flag++;<span class="keyword">return</span>;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="javascript">            <span class="keyword">if</span> (curT &lt;= minT) &#123;</span></span><br><span class="line"><span class="javascript">                curEle.style.top = minT + <span class="string">'px'</span>;</span></span><br><span class="line"><span class="undefined">                speed *= -1;</span></span><br><span class="line"><span class="javascript">                <span class="keyword">return</span>;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="javascript">            curEle.style.top = curT + <span class="string">'px'</span>;</span></span><br><span class="line"><span class="undefined">            flag = 0;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;, 17);</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">    </span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/22/移动端/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tiandali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tiandali">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/22/移动端/" itemprop="url">移动端</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-22T01:12:50+08:00">
                2018-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="视口"><a href="#视口" class="headerlink" title="视口"></a>视口</h3><p><strong>在写移动端(响应式)项目时，页面必须加上这句话(viewport) ，这句话一般加在head元素内(meta标签-文档编码后面)</strong><br>      <strong>meta : v p + tab 键</strong><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;meta name=<span class="string">"viewport"</span></span><br><span class="line">          content=<span class="string">"width=device-width,（让HTML页面宽度等于设备宽度） user-scalable=no,（禁止用户手动缩放） initial-scale=1.0,（初始缩放比例） maximum-scale=1.0, （最大放大比例）minimum-scale=1.0 （最小缩放比）"</span>&gt;</span><br><span class="line">不放大也不缩小,部分安卓机中设置user-scalable是不起作用的需要同这两个一起使用</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>layout viewport：布局视口（开发css等相关）<br>visual viewport：手机视口<br>ideal viewport：理想视口</p>
</blockquote>
<hr>
<blockquote>
<ul>
<li>HTML的宽度&gt;手机宽度=&gt;把页面整体缩放</li>
<li>页面内容宽度&gt;HTML页面的宽度=&gt;出现横向滚动条<br>真实项目中是不会出现横向滚动条的，想让他不出现横向滚动条就要保证的内容的宽度不会超过HTML页面的宽度</li>
<li>移动端开发手机设备宽度不一定，HTML页面的宽度也不一定，所以内容的宽度一般也是不固定的（也就是所谓的百分比宽度）</li>
<li>移动端开发：外层盒子的宽度一般都是百分比设定的，很少有些固定值的（里面具体的小元素宽度可以固定）=》流式响应式布局方案<br>在PC端我们开发的HTML页面运行在浏览器中，浏览器有多宽（一般浏览器代表设备的宽度）HTML就有多宽，也就是在浏览器宽度的视口中渲染和呈现我们的页面。</li>
</ul>
</blockquote>
<hr>
<p><strong>移动端和pc端有区别</strong>：<br>不管移动端设备（代指打开的浏览器）的宽度是多少，HTML页面的宽度就是980（或者1024）=&gt;导致的问题：如果在设备窗口中想把整个页面完全呈现出来，小窗口中展示大页面，我们只能把大页面进行缩放，HTML页面缩放了那么页面中所有内容都缩放了.<br><strong>解决方案</strong><br>只要让HTML5页面宽度和手机设备宽度保持一致即可，就不会出现首先渲染页面的时候把页面缩放的事情了。<br><strong>平时处理的移动端项目</strong><br>1.pc端和移动端公用一套项目的（结构相对简单：一般都是展示类的企业网站）<br>A：先做PC端，设计师给的设计稿一般都是给PC端的，一般宽度都不是写死的，宽度是自适应的（具体情况具体分析）<br>B：切换到手机上，使用@media（媒体查询）把不同设备上不合适的样式进行修改<br><strong>设计师一般只给一套设计稿</strong><br>2.pc端和移动端是分开的两套不同的项目<br>=》pc端单独做（做的时候不需要考虑移动端响应式）固定布局<br>=》移动端单独做，只需考虑移动端的响应式适配即可响应式布局</p>
<ul>
<li>A：依然给予@media来处理</li>
<li>B:固定布局（viewport=》width=320px）:：按照设计稿把320尺寸的写好即可，所有的尺寸都可以固定，而且都是设计稿的一半，因为设计稿是大一倍的，在其他的设备上，让320的页面居中展示即可</li>
<li>C：scale等比缩放布局（严格按照设计稿的尺寸来写样式，没有自适应宽度，都是固定写死的，在其他设备上，首先获取设备的宽度，让其除以设计稿的宽度，然后让原始写好的页面按照这个比例整体缩小即可）=》导致一些问题：如：字体变模糊</li>
<li>D：rem 等比缩放，他是参考scale，只是用的是rem单位实现的缩放。但是一般宽度都让他自适应。其余的值可以写成固定值，在编写css样式的时候我们把所有的px单位都换算成rem单位，当加载完成的时候，根据当前设备的尺寸初一设计稿，根据比例动态调整rem和px的换算比例，弊端高度容易出现误差，一般缩放的是宽度，但是高度一般不是等比的。可以用@media修改，也可以把垂直方向的间距等用百分比设置</li>
<li>E：css3中提供了flex-box伸缩盒模型，基于这个属性，可以让某些效果处理起来更方便</li>
<li>A&amp;D&amp;E较多使用</li>
</ul>
<p><strong>一般会给两套设计稿，移动端+pc</strong><br>一般都是640<em>1136,或者（980不设高度），750</em>1334…<br>为什么给的设计稿都比参照手机大一倍？<br>目的是保证我们切下来的素材资源图片是大图<br>为什么要保证是大图？<br>因为很多手机都是二倍及三倍屏幕像素密度比DPR的<br>即使给的是二倍设计稿，但是部分手机的设备尺寸要大于设计稿的一半，有的手机是3倍DPR的，这样就导致一个问题，部分图片还是会变的模糊一些，此时我们找设计师单独的把模糊图片要一张大图即可<br>通俗的讲就是高分辨率手机要配合高分辨率图片，非高清的图片用高分辨率手机看着看更模糊</p>
<h3 id="媒体查询"><a href="#媒体查询" class="headerlink" title="媒体查询"></a>媒体查询</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">media screen and (min-width:375px)&#123;</span><br><span class="line">    min-width:375px 大于等于375px</span><br><span class="line">    max-width:375px 小于等于375px</span><br><span class="line">&#125;</span><br><span class="line">  @media screen and (orientation: portrait)&#123;</span><br><span class="line">          //竖屏  </span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        @media screen and (orientation: landscape)&#123;</span><br><span class="line">//横屏</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>
<p>@media  [媒体设备]<br>all-&gt;所有设备<br>screen-&gt;所有屏幕设备（pc+电脑）<br>print-&gt;打印机设备<br>@media all and (max-width:480px){}<br><strong>当前页面的宽度小于等于480px</strong></p>
<p>手机常用设备尺寸<br>苹果：320，375，414<br>安卓：320，360，480，540，640，（760…）<br>pad:768<em>1024,1024</em>1366</p>
<h4 id="响应式布局"><a href="#响应式布局" class="headerlink" title="响应式布局"></a>响应式布局</h4><p>能够在不同尺寸的设备上都能良好的展示，这就是响应式布局设计（responsive layout）<br>公司中的产品形态：<br>pc端（全屏页面需要宽度自适应，但是一般都是固定宽度）<br>pc端+移动端用一套项目（简单的页面，产品介绍，公司展示类的官网）<br>移动端（移动端设备差异较大，需要做响应式布局开发）<br>嵌入到APP中的H5<br>微信分享出来的H5<br>微信公众号<br>小程序<br>靠浏览器访问的H5<br>react native、ionic/cordova…js开发APP框架，使用JS代码开发APP最后框架会把代码转换为安卓和IOS需要的代码</p>
<blockquote>
<p>如何实现响应式布局开发<br>最常用的方案：rem等比缩放响应式布局<br>做移动端H5开发，首先加meta标签。meta:vp<br>rem和px都是样式单位，px是固定单位，rem是相对单位，相当于当前页面根元素html的字体设置的单位<br>我们开始给HTML的字体大小设置为100px（1rem=100px），接下来我们写样式的时候把所有的尺寸都有rem设定，测量出来的px值/100就是应该设置的rem的值，如果HTML的fontsize不变，用rem和px一样，但是如果字体大小改变，也就是改变了rem和px之间的换算比例，那么之前所有rem做单位的样式都会自动按照最新的比例进行缩放。实现了改动HTMLfontsize整个页面中的元素都跟着缩放了，牵一发动全身。<br>真实项目中设计师给我们一套设计稿，常用的尺寸（640<em>1136,750</em>1334,640<em>960.。。。）拿到设计稿后，我们严格按照设计稿中的尺寸编写样式<br>HTML{<br>Ffont-size：100px;}<br>接下来鞋样室把测量出来的px都除以100变为rem,所有的单位都是基于rem来搞<br>假定设计稿是750，也就是相当于750的设备，1rem=100px;<br>我们的页面在320的设备上，我们需要修改HTML的字体大小，此时实现页面跟着整体缩放，：320/750</em>100，当前设备上HTML的字体大小。</p>
</blockquote>
<h4 id="gitHub发布自己项目"><a href="#gitHub发布自己项目" class="headerlink" title="gitHub发布自己项目"></a>gitHub发布自己项目</h4><ol>
<li>登录gitHub</li>
<li>创建空仓库</li>
<li>settings -&gt; GitHub Pages  -&gt;choose a theme -&gt;随便选择一个模板即可（反正也没啥用，和我们的页面样式不一样） select theme -&gt; commit changes  （此时仓库就不是空的了）<br><a href="https://zhufengpeixun.github.io/H5RESUME/" target="_blank" rel="noopener">https://zhufengpeixun.github.io/H5RESUME/</a>  输入这个网址可以看到刚才发布的页面<br><a href="https://zhufengpeixun[gitHub用户名].github.io/H5RESUME[仓库名]/index.html[项目中的文件名]" target="_blank" rel="noopener">https://zhufengpeixun[gitHub用户名].github.io/H5RESUME[仓库名]/index.html[项目中的文件名]</a></li>
<li>把创建好的远程仓库克隆到本地，并且把自己的项目原代码放到本地仓库中</li>
<li>把本地仓库中的内容推送到远程仓库上<br>git add -A<br>git commit -m’备注信息’<br>git push origin master   （可能让你输入远程仓库的用户名和密码）</li>
</ol>
<p>易企秀<br>兔展</p>
<h4 id="制作简易App"><a href="#制作简易App" class="headerlink" title="制作简易App"></a>制作简易App</h4><p>HBuilder:文件》打开目录》选择你要打包的项目》右键点击项目》发行》云打包原生APP》（不能有种中文）</p>
<h3 id="Hybrid混合App开发"><a href="#Hybrid混合App开发" class="headerlink" title="Hybrid混合App开发"></a>Hybrid混合App开发</h3><p> 前端做的都是H5页面<br>运行在浏览器中<br>移动端不仅可以运行在浏览器中，还可以运行在App中（例如：微信、自己公司的App中）</p>
<blockquote>
<p>【优点】</p>
<ul>
<li>及时更新（不需要用户选择，我们只需要把服务器上的源文件更新，用户访问的用域是最新的）</li>
<li>跨平台，成本低</li>
</ul>
<p>【弊端】</p>
<ul>
<li>不是直接运行在操作系统中的，是运行在浏览器或者App中的，所以不能直接的操作手机上的软硬件（运作模式：H5通知浏览器或者App我们想做什么 -&gt; 浏览器调取手机的软硬件 -&gt; 浏览器把信息返回给H5）</li>
<li>性能没有App好</li>
</ul>
</blockquote>
<h4 id="App不是H5，是原生的应用-NativeApp"><a href="#App不是H5，是原生的应用-NativeApp" class="headerlink" title="App不是H5，是原生的应用 NativeApp"></a>App不是H5，是原生的应用 NativeApp</h4><p>IOS : object-c / swift (需要C的功底)<br> 安卓: java-native （需要JAVA功底）</p>
<blockquote>
<p>【优点】<br>用户把安装包下载到手机上进行安装，后期程序是直接运行在手机操作系统中的</p>
<ul>
<li>性能高</li>
<li>可以调取手机内置的软件或者硬件（例如：调取摄像头、重力感应器、通讯录等）【前提用户需要同意才可以】</li>
</ul>
<p>【弊端】<br>不能跨平台，一款产品需要两个团队开发两套不同的安装包</p>
<ul>
<li>成本大</li>
<li>版本不统一</li>
<li>不能及时更新</li>
</ul>
</blockquote>
<h4 id="Hybrid混合App开发诞生"><a href="#Hybrid混合App开发诞生" class="headerlink" title="Hybrid混合App开发诞生"></a>Hybrid混合App开发诞生</h4><p>把传统的IOS / 安卓开发 与 H5开发结合在一起来做 （微信公众号开发：把我们做的H5运行在微信App中）</p>
<h4 id="React-Native-ionic-微信小程序…"><a href="#React-Native-ionic-微信小程序…" class="headerlink" title="React Native ionic 微信小程序…"></a>React Native ionic 微信小程序…</h4><h4 id="SEO-网络运营推广（搜索引擎优化推广）"><a href="#SEO-网络运营推广（搜索引擎优化推广）" class="headerlink" title="SEO 网络运营推广（搜索引擎优化推广）"></a>SEO 网络运营推广（搜索引擎优化推广）</h4><p>目标：尽可能在搜索引擎中提升产品的权重（ALEX排名）<br>百度是一个搜索引擎，他养了一个宠物 “爬虫 / 蜘蛛” ，他会让爬虫有规律的去你网站中进行内容的收录（收录到自己的词库中），当用户在引擎中输入关键词进行查询，引擎会到自己的词库中进行匹配，把匹配的站点推荐展示</p>
<p>如果我们向做SEO优化，应该尽可能的让引擎多收录一些关键词和内容</p>
<blockquote>
<p>给当前页面设置meta标签/title<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;title&gt;网站标题&lt;/title&gt;</span><br><span class="line">   &lt;meta name=&quot;keywords&quot; content=&quot;页面关键词&quot;&gt;</span><br><span class="line">   &lt;meta name=&quot;description&quot; content=&quot;页面描述&quot;&gt;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>对于一个页面中h1-h6这些标签的权重较高，尤其是H1，我们尽可能把重要的关键词放到H1中（语义化标签合理使用）<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> &lt;h1&gt;</span><br><span class="line"> &lt;img src=&quot;&quot; alt=&quot;&quot;/&gt;</span><br><span class="line"> 新浪网</span><br><span class="line"> &lt;/h1&gt;</span><br><span class="line">H1中的文字不需要展示给用户但是我们还会写一些文字主要是给爬虫看的，样式中fontsize等于零即可，img是不被收录的，但是ALT中编写的问题可以被收录所以img标签的alt属性一定要加，最好写一些关键词</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>前后端分离项目，（数据由客户端js获取和渲染）是不利于SEO优化的<br>使用JS数据绑定，页面的源代码中没有动态绑定的数据的，但是用户在页面中可以看见内容，而搜索引擎的爬虫就是从源代码进行抓取收录的，vue和react都是JS做数据绑定的。<br>目前市场上大部分都是前后端分离项目，也就是JS数据绑定，由客户端渲染，但是还有一部分项目依然是传统的服务端数据处理（非完全前后端分离项目）</p>
</blockquote>
<p>2.SEM百度竞价推广（千万不能信）</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/22/常用设计模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tiandali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tiandali">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/22/常用设计模式/" itemprop="url">常用设计模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-22T01:12:39+08:00">
                2018-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="JAVASCRIPT中常用的设计模式"><a href="#JAVASCRIPT中常用的设计模式" class="headerlink" title="JAVASCRIPT中常用的设计模式"></a>JAVASCRIPT中常用的设计模式</h3><p>学习各种设计模式有什么作用？</p>
<blockquote>
<p>[ 开发 ]<br>开发效率高<br>利于团队协作</p>
<p>[ 维护 ]<br>有利于代码的升级改版<br>逻辑清晰，代码严谨，利于后期的维护</p>
<p>[ 通用 ]<br>我们依托设计模式可以实现组件化、模块化、插件化、框架化以及一些常用类库方法的编写</p>
<p><code>技术语言发展路线</code><br>语言语法更新迭代之路（路漫漫而其修远兮）<br>语法初步稳定阶段 -&gt; 研究核心语法和使用的早一批人 -&gt;封装各种类库和插件 -&gt;大量研究核心的开发人员…  -&gt;出现各种设计模式 -&gt;框架(VUE、REACT)</p>
</blockquote>
<h4 id="插件、组件、类库、框架的区别"><a href="#插件、组件、类库、框架的区别" class="headerlink" title="插件、组件、类库、框架的区别"></a>插件、组件、类库、框架的区别</h4><blockquote>
<p>类库：提供一些真实项目开发中常用的方法（方法做了完善处理：兼容处理、细节优化），方便我们开发和维护 [ jQuery、Zepto… ]</p>
<p>插件：把项目中某一部分进行插件封装（是具备具体的业务逻辑的，更加有针对性），以后再有类似的需求，直接导入插件即可，相关业务逻辑代码不需要自己在编写了 [ jquery.drag.js 、jquery.dialog.js、jquery.validate.min.js 、datepicker日历插件、echarts统计图插件、iscroll插件…]</p>
<p>组件：类似于插件，但是插件一般只是把JS部分封装，组件不仅封装了JS部分，而且把CSS部分也封装了，以后再使用的时候，我们直接的按照文档使用说明引入CSS/JS，搭建对应的结构，什么都不用做功能自然就有了 [ swiper组件、bootstrap组件… ]</p>
<p>框架：比上面的三个都要庞大，它不仅仅提供了很多常用的方法、而且也可以支持一些插件的扩展（可以把一些插件集成到框架中运行）、更重要的是提供了非常优秀的代码管理设计思想…  [ REACT、VUE、ANGULAR、REACT NATIVE… ]</p>
</blockquote>
<h3 id="JS中常用的设计模式"><a href="#JS中常用的设计模式" class="headerlink" title="JS中常用的设计模式"></a>JS中常用的设计模式</h3><blockquote>
<p>单例设计模式、构造原型设计模式、发布订阅设计模式、promise设计模式…</p>
</blockquote>
<h4 id="单例设计模式"><a href="#单例设计模式" class="headerlink" title="单例设计模式"></a><code>单例设计模式</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=&gt;单例模式：把实现当前这个模块所有的属性和方法汇总到同一个命名空间下（分组作用，避免了全局变量的污染）</span></span><br><span class="line"><span class="keyword">let</span> exampleRender=(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//=&gt;实现当前模块具体业务逻辑的方法全部存放在闭包中</span></span><br><span class="line">	<span class="keyword">let</span> fn=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">		<span class="comment">//...</span></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> &#123;</span><br><span class="line">		init:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			<span class="comment">//=&gt;入口方法：控制当前模块具体的业务逻辑顺序</span></span><br><span class="line">			fn();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;)();</span><br><span class="line">exampleRender.init();</span><br></pre></td></tr></table></figure>
<blockquote>
<p>真实项目中，我们如果想要实现具体的业务逻辑需求，都可以依托于单例模式构建；我们把项目划分成各大板块或者模块，把实现同一个板块的方法放在一个独立的命名空间下，方便团队协作开发；</p>
</blockquote>
<h4 id="构造原型模式"><a href="#构造原型模式" class="headerlink" title="构造原型模式"></a><code>构造原型模式</code></h4><p>：最贴近OOP面向对象编程思想的</p>
<blockquote>
<p>以后真实项目中，不管是封装类库还是插件或者UI组件，基本上都是基于构造原型模式来开发的<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Tool</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>()&#123;</span><br><span class="line">		<span class="keyword">this</span>.isCompatible=<span class="string">'addEventListener'</span> <span class="keyword">in</span> <span class="built_in">document</span>;<span class="comment">//=&gt;如果不兼容返回FALSE(IE6~8)</span></span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//=&gt;挂载到原型上的方法</span></span><br><span class="line">	css()&#123;</span><br><span class="line">		<span class="comment">//...</span></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//=&gt;挂载到普通对象上的方法</span></span><br><span class="line">	<span class="keyword">static</span> distinct()&#123;</span><br><span class="line">		<span class="comment">//...</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Banner</span> <span class="keyword">extends</span> <span class="title">Tool</span></span>&#123;</span><br><span class="line">	<span class="keyword">constructor</span>(...arg)&#123;</span><br><span class="line">		<span class="keyword">super</span>();</span><br><span class="line">		<span class="keyword">this</span>.xxx=xxx;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//=&gt;挂载到子类原型上的方法</span></span><br><span class="line">	bindData()&#123;</span><br><span class="line">		<span class="keyword">this</span>.css();<span class="comment">//=&gt;把父类原型上的方法执行（子类继承了父类，那么子类的实例就可以调取父类原型上的方法了）</span></span><br><span class="line">		<span class="keyword">this</span>.distinct===<span class="literal">undefined</span>;<span class="comment">//=&gt;子类的实例只能调取父类原型上的方法，以及父类给实例提供的私有属性方法，但是父类做为普通对象加入的静态方法，子类的实例是无法调取的 (只有这样才可以调取使用：Tool.distinct())</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>我有三个类 A/B/C ，我想让C继承A和B<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">B</span> <span class="keyword">extends</span> <span class="title">A</span></span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">C</span> <span class="keyword">extends</span> <span class="title">B</span></span>&#123;</span><br><span class="line">	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p><code>发布订阅设计模式：观察者模式</code></p>
<blockquote>
<p>不同于单例和构造，发布订阅是小型设计模式，应用到某一个具体的需求中：凡是当到达某个条件之后要执行N多方法，我们都可以依托于发布订阅设计模式管理和规划我们的JS代码</p>
<p>我们经常把发布订阅设计模式嵌套到其它的设计模式中</p>
</blockquote>
<h4 id="promise设计模式"><a href="#promise设计模式" class="headerlink" title="promise设计模式"></a><code>promise设计模式</code></h4><blockquote>
<p>解决AJAX异步请求层级嵌套的问题</p>
<p>它也是小型设计模式，目的是为了解决层级嵌套问题的，我们也会经常把它嵌套在其它的设计模式中运行<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">	url:<span class="string">'/A'</span>,</span><br><span class="line">	<span class="keyword">async</span>:<span class="literal">true</span>,<span class="comment">//=&gt;异步</span></span><br><span class="line">	success:<span class="function"><span class="keyword">function</span>(<span class="params">result</span>)</span>&#123;</span><br><span class="line">		$.ajax(&#123;</span><br><span class="line">			url:<span class="string">'/B'</span>,</span><br><span class="line">			<span class="keyword">async</span>:<span class="literal">true</span>,</span><br><span class="line">			success:<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">				<span class="comment">//=&gt;还会有后续嵌套</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);		</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="发布订阅设计模式"><a href="#发布订阅设计模式" class="headerlink" title="发布订阅设计模式"></a>发布订阅设计模式</h4><blockquote>
<p>俗称叫做“观察者模式”</p>
<p>实现思路和原理：<br>1、我们先创建一个计划表（容器）<br>2、后期需要做什么事情，我们都依次把需要处理的事情增加到计划表中<br>3、当符合某个条件的时候，我们只需要通知计划表中的方法按照顺序依次执行即可</p>
</blockquote>
<p><code>JQ中的发布订阅</code></p>
<blockquote>
<p>JQ中提供了实现发布订阅设计模式的方法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> $plan = $.Callbacks();<span class="comment">//=&gt;创建一个计划表</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> fn = <span class="function"><span class="keyword">function</span>(<span class="params">n,m</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//=&gt;n=100 m=200</span></span><br><span class="line">&#125;</span><br><span class="line">$plan.add(fn);<span class="comment">//=&gt;向计划表中增加方法</span></span><br><span class="line">$plan.remove(fn);<span class="comment">//=&gt;从计划表中移除方法</span></span><br><span class="line"></span><br><span class="line">$plan.fire(<span class="number">100</span>，<span class="number">200</span>);<span class="comment">//=&gt;通知计划表中所有的方法按照顺序执行；100 200会分别作为实参传递给每一个需要执行的方法；</span></span><br></pre></td></tr></table></figure></p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/22/dom事件/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tiandali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tiandali">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/22/dom事件/" itemprop="url">dom事件</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-22T01:12:12+08:00">
                2018-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="dom事件"><a href="#dom事件" class="headerlink" title="dom事件"></a>dom事件</h3><blockquote>
<ul>
<li>1.什么是事件？<br>事件就是一件事情或者行为（对于元素来说他的很多事件都是天生自带）只要我们去操作这个元素就会触发事件。<br>事件就是元素天生自带的行为，我们操作元素就会触发相关的事件行为</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>2.事件绑定：给元素天生自带的事件行为绑定方法，当事件触发会把对应的方法执行</li>
<li>3.元素天生自带的事件<br><strong>鼠标事件</strong><br><code>click</code>:点击（pc端是点击，移动端的click代表单击，并且使用click会有300ms的延迟）<br><code>dblclick</code>:双击<br><code>mouseover</code>:鼠标经过<br><code>mouseout</code>:鼠标移出<br><code>mouseenter</code>:鼠标进入<br><code>mouseleave</code>:鼠标离开<br><code>mousemove</code>:鼠标移动<br><code>mousedown</code>:鼠标按下（鼠标左右键都起作用他是按下即触发，click是按下抬起才出发，而且是先把down和up先触发，click才触发）<br><code>mouseup</code>:鼠标抬起<br><code>mousewheel</code>:鼠标滚轮滚动<br><strong>键盘事件</strong><br><code>keydown</code>:键盘按下<br><code>keyup</code>:键盘抬起<br><code>keypress</code>:和keydown类似只不过keydown返回的是键盘码。keypress返回的是ASCII码值<br><code>input</code>:由于pc有实体物理键盘，可以监听到键盘的按下和抬起，但是<code>移动端</code>是虚拟的键盘，所以keydown和keyup在大部分手机上都没有，我们使用input事件统一代替他们（内容改变事件）</li>
</ul>
</blockquote>
<p><strong>表单元素常用的事件</strong><br><code>focus</code>：获取焦点<br><code>blur</code>:失去焦点<br><code>change</code>:内容改变<br><strong>其他常用事件</strong><br><code>load</code>:加载完成<br><code>unload</code>:<br><code>beforeunload</code>:<br><code>scroll</code>:滚动条滚动事件<br><code>resize</code>：大小改变事件window.onresize=function(){}当浏览器窗口大小发生改变会触发这个事件执行对应的事情。<br><code>readystatechange</code>:ajax状态改变<br><strong>移动端手指事件</strong><br><code>gesture</code>:多指操作<br><code>touchstart</code>:手指按下<br><code>touchmove</code>:手指移动<br><code>touchend</code>：手指离开<br><code>touchcancel</code>:因为意外情况导致手指操作取消<br><code>gesturestart</code>:多指按下<br><code>gesturechange</code>:多指改变<br><code>gestureend</code>:手指离开<br><strong>h5中的audio、video音频事件</strong><br><code>canplay</code>；可以播放（播放过程中可能出现由于资源没有加载完成导致卡顿<br><code>canplaythrough</code>：资源加载完成可以正常无障碍播放</p>
<p>事件绑定</p>
<blockquote>
<p><strong>DOM0级事件绑定</strong><br>[element].onxxx=function(){};</p>
</blockquote>
<hr>
<blockquote>
<p><strong>DOM2级事件绑定</strong><br>[element].addEventListener(‘xxx’,function(){},false);<br>[element].attachEvent(‘onxxx’,function(){});[ie6-8];</p>
</blockquote>
<hr>
<blockquote>
<p>给元素的事件行为绑定方法，当行为触发的时候浏览器会把绑定的方法执行<br>    1.方法中的this：当前操作的元素（除非自己改动this，比如箭头函数，或者bind）<br>    2.事件绑定属于异步操作，绑定的时候方法没有执行，还是创建方法的阶段呢，当行为触发浏览器才会把方法执行。（当然也有变态的执行方式：bo.onclick(),这样执行仅仅是把它当做一个变量和函数执行，和事件没啥关系。）<br>    3.浏览器不仅把这个方法执行了，还记录了当前本次操作的相关信息（如果是鼠标点击，浏览器记录点击的位置，点的是谁等信息），把这些信息都存储到一个对象中（这个对象就是实践对象：记录当前本次操作信息的对象）；更重要的是标准浏览器会把这个对象（堆内存）传递给执行的方法。我们可以在方法中通过形参或者实参集合等方式受到传递的事件对象信息；</p>
</blockquote>
<blockquote>
<p>目的：给当前元素的某个事件绑定方法不管是基于dom0还是dom2都是为了触发元素的相关行为的时候能做点事情也就是把绑定的方法执行；不仅把方法执行了而且浏览器还给方法传递了一个实参信息值===》这个值就是<code>事件对象ev</code><br>目的：事件对象中记录了很多属性名和属性值，这些信息中包含了当前操作的基础信息，例如鼠标点击位置的x/y轴坐标，鼠标点击的是谁（事件源）等信息</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">box.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;<span class="comment">//定义一个形参ev用来接收方法执行的时候，浏览器传递的信息值（事件对象mouseevent鼠标事件对象，keyboardevent键盘事件对象，event普通事件对象。。）</span></span><br><span class="line"><span class="comment">//目的：事件对象中记录了很多属性名和属性值，这些信息中包含了当前操作的基础信息，例如鼠标点击位置的x/y轴坐标，鼠标点击的是谁（事件源）等信息</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(ev);&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>  <code>ev.target</code>:事件源（操作的是哪个元素） <code>ev.srcElement;</code>低版本浏览器<br> <code>ev.clientX/ev.clientY</code>:当前鼠标触发点距离当前窗口左上角的x/y轴坐标<br>    <code>ev.pageX/ev.pageY</code>:当前鼠标触发点距离body（第一屏）左上角的x/y轴坐标。<br>    <code>ev.preventDefault()</code>:阻止默认行为<br>    <code>ev.stopPropagation()</code>:阻止事件的冒泡传播<br>     <code>ev.cancelBubble = true;</code>//=&gt;低版本阻止冒泡传播<br>   <code>ev.type</code>:当前事件类型<br>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">   [用到其中的几个属性,需要处理兼容]</span><br><span class="line">    box.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">    ev=ev||<span class="built_in">window</span>.event;</span><br><span class="line">    <span class="keyword">let</span> target=ev.target||ev.srcElement,</span><br><span class="line">    pageY=ev.pageY||(ev.clientY+(<span class="built_in">document</span>.documentElement.scrollTop||<span class="built_in">document</span>.body.scrollTop))&#125;;</span><br><span class="line">    [很多地方都用到这些属性,而且用的多]</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handleEvent</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">   <span class="keyword">if</span>(<span class="built_in">window</span>.event&amp;&amp;!ev)&#123;<span class="comment">//低版本浏览器，我们需要处理的不仅仅是把ev赋值，还要把高版本中有低版本没有的属性给ev加上</span></span><br><span class="line">   ev=<span class="built_in">window</span>.event;</span><br><span class="line">   ev.target=ev.srcElement;</span><br><span class="line">   ev.pageX=ev.clientX+(<span class="built_in">document</span>.documentElement.scrollLeft||<span class="built_in">document</span>.body.scrollLeft);</span><br><span class="line">   ev.pageY=ev.clientY+(<span class="built_in">document</span>.documentElement.scrollTop||<span class="built_in">document</span>.body.scrollTop);</span><br><span class="line">   ev.which=ev.keyCode;</span><br><span class="line">   ev.preventDefault=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">   ev.return=<span class="literal">false</span>;</span><br><span class="line"> &#125;</span><br><span class="line">ev.stopPropagation=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">ev.cancelBubble=<span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line">   &#125;</span><br><span class="line">    <span class="keyword">return</span> ev;</span><br><span class="line">    &#125;</span><br><span class="line">    box.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">    ev.handleEvent(ev);</span><br><span class="line">    <span class="keyword">let</span> target=ev.target;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<hr>
<blockquote>
<p><strong>keyboardEvent</strong><br>ev.code:当前按键“keyE”<br>ev.key:当前按键’e’<br>ev.which/ev.keycode:当前按键的键盘码69</p>
</blockquote>
<hr>
<blockquote>
<p>常用的键盘码<br> <code>左 - 上 - 右 - 下</code> ：37-38-39-40<br> <code>Backspace删除键</code>：18<br> <code>Enter</code>：13<br> <code>Space</code>：32<br><code>Delete</code>：46</p>
<p><code>Shift</code>：16<br><code>Alt</code>：18<br><code>Ctrl</code>：17<br><code>Esc</code>：27<br><code>F1-F12</code>：112-123<br><code>0-9</code>：48-57<br><code>a-z</code>：小写字母<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">box.onclick = <span class="function"><span class="keyword">function</span>(<span class="params">ev</span>)</span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(!ev)&#123;</span><br><span class="line">	<span class="comment">//兼容思想：低版本没有的属性，我们手动设置一些：按照自己有的先获取到值，然后赋值给标准对应的新属性（经过判断处理后，低版本中也有target/pageX/pageY这些属性），后期在使用的时候，直接按照高版本的使用即可</span></span><br><span class="line">		ev = <span class="built_in">window</span>.event;</span><br><span class="line">		<span class="built_in">console</span>.log(ev.srcElement); <span class="comment">//=&gt;ev.srcElement是获取事件源（标准浏览器使用的是ev.target）</span></span><br><span class="line">		<span class="built_in">console</span>.log(ev.ev.pageX); <span class="comment">//=&gt;低版本浏览器的事件对象中不存在pageX/pageY</span></span><br><span class="line">		ev.target = ev.srcElement;</span><br><span class="line">		ev.pageX = ev.clientX+(<span class="built_in">document</span>.documentElement.scrollLeft||<span class="built_in">document</span>.body.scrollLeft)</span><br><span class="line">		ev.pageY = ev.clientX+(<span class="built_in">document</span>.documentElement.scrollTop||<span class="built_in">document</span>.body.scrollTop)</span><br><span class="line">		ev.which = ev.keyCode;</span><br><span class="line">		<span class="comment">//ev.preventDefault  ev.stopPropagation 低版本不存在</span></span><br><span class="line">		ev.preventDefault = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			ev.returnValue = <span class="literal">false</span>; <span class="comment">//低版本阻止默认行为</span></span><br><span class="line">		&#125;</span><br><span class="line">		ev.stopPropagation = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">			ev.cancelBubble= <span class="literal">true</span>; <span class="comment">//低版本阻止冒泡传播</span></span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="comment">//=&gt;直接按照高版本的规则使用</span></span><br><span class="line">	<span class="built_in">console</span>.log(ev.target,ev.which);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//兼容处理方法二</span></span><br><span class="line">box.onclick = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//用到谁，给谁处理兼容</span></span><br><span class="line">        ev=ev || <span class="built_in">window</span>.event;</span><br><span class="line">        <span class="keyword">var</span> target = ev.target || ev.srcElement;</span><br><span class="line">        ev.preventDefault()?ev.preventDefault()():ev.returnValue=<span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="事件的默认行为"><a href="#事件的默认行为" class="headerlink" title="事件的默认行为"></a>事件的默认行为</h4><blockquote>
<p>事件本身就是天生就有的，某些事件触发即使你没有绑定方法也会存在一些效果，这些默认的效果就是<code>事件的默认行为</code><br> 1.点击A实现页面跳转<br>    2.锚点定位（href=“元素的ID”），点击的时候url中设置对应的hash值（#xxx），页面加载完成后会定位到ID和hash值相同的盒子位置。真实项目中就是一个普通按钮，不想实现页面跳转或者锚点定位。此时我们需要阻止点击A的时候的默认行为。<br>    结构上阻止：<code>href=&quot;JavaScript:;&quot;</code>或者void(0),null;undefined;<br>    js方法阻止：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">link.onclick=function（ev）&#123;</span><br><span class="line">    ev=ev||window.event;</span><br><span class="line">    ev.preventDefault?ev.preventDefault():ev.returnValue=false;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">或者link.onclick=function()&#123;</span><br><span class="line">   return false;</span><br><span class="line">   //原理：点击A的时候首先触发的是click其次才会触发它的默认行为，我们在click中返回false其意思是阻止下一步继续操作。</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<p>基于hash值可以实现spa单页面应用<br><strong>input标签也有自己的默认行为</strong><br>1.输入内容可以呈现到文本框中<br>2.输入内容的时候会把之前输入的一些信息呈现出来，并不是所有浏览器和所有情况下都有</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">    //真实项目中我们根据需求可能会组织文本框输入内容，此时其实就是阻止他的默认行为</span><br><span class="line">userInp.onkeydown=userInp.onkeyup=function(ev)&#123;</span><br><span class="line">let val=this.value.trim(),</span><br><span class="line">len=val.length;</span><br><span class="line">if(len&gt;10)&#123;</span><br><span class="line">this.value=val.substr(0,10);超过十位的截掉</span><br><span class="line">有值的键是不允许输入的del/back-space/space/shift/ctrl/alt/tab...</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>submit按钮也存在默认行为</strong><br>1.点击按钮页面会刷新</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;from action=&apos;wangzhi&apos;&gt;&lt;input type=&apos;submit&apos;&gt;&lt;/from&gt;</span><br></pre></td></tr></table></figure>
<h4 id="事件的传播机制"><a href="#事件的传播机制" class="headerlink" title="事件的传播机制"></a>事件的传播机制</h4><blockquote>
<p>冒泡传播：触发当前元素的某一个事件（点击事件）行为不仅当前元素事件行为触发，而且其祖先元素的相关事件行为也会一次被触发，这种机制就是<code>事件的冒泡传播机制</code>。</p>
<ul>
<li>捕获阶段：点击inner的时候首先会从最外层开始向内查找的（找到操作的事件源），查找的目的是构建出冒泡传播阶段需要传播的路线（查找就是按照HTML层级结构找的）</li>
<li>目标阶段：把事件源的相关操作行为触发（如果绑定了方法则把方法执行）</li>
<li>冒泡传播：按照捕获阶段规划的路线自内而外把当前事件源的祖先元素的相关事件行为一次触发（如果某一个祖先元素事件行为绑定了方法，则把方法执行，没绑定方法，行为触发了，什么都不做，继续向上传播即可）</li>
</ul>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">xxx.onxxx=function()&#123;&#125;;dom0事件绑定，给元素的事件行为绑定方法这些都是在当前元素事件行为的冒泡阶段或者目标阶段执行的</span><br><span class="line">  xxx.addEventListener(&apos;xxx&apos;,function()&#123;&#125;,false)第三个参数false也是控制绑定的方法在事件传播的冒泡阶段或者目标阶段执行，只有第三个参数为true才代表让当前方法在事件传播的冒泡阶段或者目标阶段执行</span><br></pre></td></tr></table></figure>
<blockquote>
<p>不同浏览器对最外层祖先元素的定义是不一样的<br>谷歌：window-&gt;document-&gt;html-&gt;body…<br>IE高：window-&gt;html-&gt;body…<br>IE低：html-&gt;body…<br><strong>关于事件对象的一些理解</strong><br>1.事件对象是用来存储当前本次操作的相关信息，和操作有关，和元素无必然关联，<br>2.当我们基于鼠标或者键盘等操作的时候，浏览器会把本次操作的信息存储起来（标准浏览器存储到默认的内存中（自己找不到），IE低版本存储到window.event中了）存储的值是一个对象（堆内存）;操作肯定会触发元素的某个行为，绑定的方法，执行此时标准浏览器会把之前存储的对象（准确来说是堆内存地址）当做实参传递给每一个执行方法，所以操作一次即使更多方法中都有ev，但是存储的值都是一个（本次操作信息的对象而已）<br><strong>mouseenter和mouseover区别</strong><br>over属于滑过覆盖事件，从父元素进入到子元素属于离开了父元素，会触发父元素的out触发子元素的over<br>enter属于进入，从父元素进入子元素，并不算离开父元素，不会触发父元素的leave触发子元素的enter。<br>enter和leave阻止了事件的冒泡传播，而over和out还存在冒泡传播。<br>所以对于父元素嵌套子元素这种情况使用over会发生很多不愿意操作的事情，此时我们使用enter会更简单，操作方便，所以真实项目中用enter的使用会比over多。</p>
</blockquote>
<h4 id="事件委托"><a href="#事件委托" class="headerlink" title="事件委托"></a>事件委托</h4><blockquote>
<p>利用事件的冒泡传播机制，如果一个容器的后代元素中很多元素的点击行为都要做一些处理此时我们不需要像以前一样一个一个获取然后绑定了，我们只需要给容器的click绑定方法即可，这样不管点击是哪个后代元素，都会根据冒泡传播的传递机制，把容器的click行为触发，把对应的方法执行，根据事件源我们可以知道点击的是谁从而做不同的事情</p>
</blockquote>
<h4 id="初步了解JS中事件绑定的方式"><a href="#初步了解JS中事件绑定的方式" class="headerlink" title="初步了解JS中事件绑定的方式"></a>初步了解JS中事件绑定的方式</h4><blockquote>
<p>DOM0事件绑定<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">oBox.onclick=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//=&gt;this:oBox</span></span><br><span class="line">	e=e||<span class="built_in">window</span>.event;</span><br><span class="line">&#125;</span><br><span class="line">oBox.onmouseenter=<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;&#125;;</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>DOM2事件绑定<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=&gt;标准浏览器</span></span><br><span class="line">oBox.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//=&gt;this:oBox</span></span><br><span class="line">	<span class="comment">//=&gt;e:事件对象</span></span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//=&gt;false:让当前绑定的方法在冒泡传播阶段执行（一般都用FALSE）</span></span><br><span class="line"><span class="comment">//=&gt;true:让当前绑定的方法在捕获阶段执行(一般不用)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt;IE6~8</span></span><br><span class="line">oBox.attachEvent(<span class="string">'onclick'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//=&gt;e:事件对象，不同于DOM0事件绑定，使用attachEvent绑定方法，当事件触发方法执行的时候，浏览器也会把事件对象当做实参传递给函数（传递的值和window.event是相同的），所以IE6~8下获取的事件对象对于：pageX\pageY\target...依然没有，还是存在兼容性（事件对象兼容处理在DOM2中依然存在）</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//=&gt;此时绑定的方法都是在冒泡传播阶段执行</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>有DOM0和DOM2事件绑定，那么DOM1事件绑定呢？<br>因为在DOM第一代升级迭代的时候，DOM元素的事件绑定方式依然沿用的是DOM0代绑定的方式，在此版本DOM中，事件绑定没有升级处理</p>
</blockquote>
<h4 id="DOM0事件绑定和DOM2事件绑定的区别"><a href="#DOM0事件绑定和DOM2事件绑定的区别" class="headerlink" title="DOM0事件绑定和DOM2事件绑定的区别"></a>DOM0事件绑定和DOM2事件绑定的区别</h4><blockquote>
<p><strong><code>DOM0事件绑定的原理</code></strong><br>1、给当前元素对象的某一个私有属性（onxxx这样的私有属性）赋值的过程（之前属性默认值是null，如果我们给赋值一个函数，相当于绑定了一个方法）<br>2、当我们赋值成功（赋值一个函数），此时浏览器会把DOM元素和赋值的函数建立关联，以及建立DOM元素行为操作的监听，当某一个行为被用户触发，浏览器会把相关行为赋值的函数执行</p>
<p>特点：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=&gt;1、只有DOM元素天生拥有这个私有属性（onxxx事件私有属性），我们赋值的方法才叫做事件绑定，否则属于给当前元素设置一个自定义属性而已</span></span><br><span class="line"><span class="built_in">document</span>.body.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;<span class="comment">//-&gt;事件绑定</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 手动点击页面中的BODY触发方法执行</span></span><br><span class="line"><span class="comment"> * document.body.onclick() 这样执行也可以</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.onzhufeng=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;<span class="comment">//-&gt;设置自定义属性</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 只能document.body.onzhufeng()这样执行</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt;2、移除事件绑定的时候，我们只需要赋值为null即可</span></span><br><span class="line"><span class="built_in">document</span>.body.onclick=<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt;3、在DOM0事件绑定中，只能给当前元素的某一个事件行为（某一个事件私有属性）绑定一个方法，绑定多个方法，最后一次绑定的会把之前绑定的都替换掉</span></span><br><span class="line"><span class="built_in">document</span>.body.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.body.onclick=<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//=&gt;点击BODY只能输出2，因为第二次赋值的函数把第一次赋值的函数给替换了</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p><strong><code>DOM2事件绑定的原理</code></strong><br>1、我们DOM2事件绑定使用的addEventListener/attachEvent都是在EventTarget这个内置类的原型上定义的，我们调取使用的时候，首先通过原型链找到这个方法，然后执行完成事件绑定的效果</p>
<p>2、浏览器首先会给当前元素的某一个事件行为开辟一个事件池（事件队列）[其实是浏览器有一个统一的事件池，我们每个元素的某个行为绑定的方法都放在这个事件池中，只是通过相关的标识来区分的]，当我们通过addEventListener做事件监听的时候，会把绑定的方法存放在事件池中</p>
<p>3、当元素的某一个行为触发，浏览器会到对应的事件池中，把当前存放在事件池中的所有方法，依次按照存放的先后顺序执行</p>
<p>特点：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=&gt;1、所有DOM0支持的事件行为，DOM2都可以使用，不仅如此，DOM2还支持一些DOM0没有的事件行为：DOMContentLoaded...</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.onDOMContentLoaded === <span class="literal">undefined</span>; <span class="comment">//=&gt;DOM0中没有这个属性</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'DOMContentLoaded'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//=&gt;标准浏览器中兼容这个事件：当浏览器中的DOM结构加载完成，就会触发这个事件（也会把绑定的方法执行）</span></span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">window</span>.attachEvent(<span class="string">'onDOMContentLoaded'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//=&gt;IE6~8中的DOM2也不支持这个事件</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt;2、DOM2中可以给当前元素的某一个事件行为绑定‘多个不同的方法’（因为绑定的所有方法都存放在事件池中了）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn3</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'click'</span>,fn1,<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'click'</span>,fn3,<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'click'</span>,fn2,<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'click'</span>,fn3,<span class="literal">false</span>);<span class="comment">//=&gt;本次向事件池中存储的时候，发现fn3已经在事件池中存在了，不能再存储了</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//3、DOM2事件绑定的移除比较麻烦一些，需要和绑定的时候：事件类型、绑定的方法、传播阶段，三个完全一致才可以移除掉</span></span><br><span class="line"><span class="built_in">document</span>.body.removeEventListener(<span class="string">'click'</span>,fn2,<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.addEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">document</span>.body.removeEventListener(<span class="string">'click'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;,<span class="literal">false</span>);</span><br><span class="line"><span class="comment">//=&gt;DOM2事件绑定需要我们养成‘未雨绸缪’的能力，绑定方法的时候尽量不用匿名函数，为后期可能会把方法在事件池中移除掉做准备</span></span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p> dom0:<br>   box.onclick=function(){};每一个元素对象都是对应类的实例，浏览器天生为其设置了很多私有属性和公有的属性方法，而onclick就是其中的一个私有属性（事件类私有属性，还有很多其他的事件私有属性，）<br>这些属性值默认为null<br>dom0事件绑定的原理：就是给元素的某一个事件私有属性赋值（浏览器会建立监听机会，当我们触发元素的某个行为，浏览器会把属性中赋的值去执行）<br>dom0事件绑定，只允许给当前元素的某个事件行为绑定一个方法，多次绑定后面绑定的会替换前面绑定的，以最后一次绑定的方法为主</p>
</blockquote>
<blockquote>
<p>dom2：<br>box.addEventListener(‘click’,function(){},false)还有removeEventListener(‘click’,function(){},false)移除，（使用的方法都是EventTarget.prototype定义的），完成时间帮顶是基于事件池机制完成的。<br>在IE低版本当中使用的是attachEvent来处理的，box.attachEvent(‘onclick’,function(){})移除使用的是dettachEvent</p>
</blockquote>
<blockquote>
<p>dom2事件绑定可以给当前元素的某一个事件行为绑定“多个不同的方法”。<br>dom2事件绑定的兼容<br>谷歌vsie高版本<br>在一处事件绑定的时候如果移除操作发生在正要执行的方法之前，如点击的时候，正要执行F8但是在执行Fn4的时候沃恩吧fn8从是坚持中移除了，谷歌下是立即移除生效，第一次也不再执行FN8了而IE是当前本次不生效，下一次点击才生效，第一次点击还是要执行FN8的<br>标准vsIE低版本<br>标准：addEventListener/removeEventListener<br>Ie低版本：attchEvent/dettachEvent<br>1.this问题：标准浏览器中行为触发方法执行方法中的this是当前元素本身，IE低版本中this执行了window<br>2.重复问题：标准浏览器中的是坚持是默认去重复的，同一个元素的同一个事件行为不能出现相同的绑定方法，但是IE低版本的事件池机制没有那么完善，不能默认去重，也就是可以给同个元素的同个事件绑定相同的方法了<br>3.顺序问题：标准浏览器是按照向事件池中存放的顺序依次执行的，而IE低版本是乱序执行的没有规律<br>IE低版本浏览器出现的所有问题都是由于本身自带的事件池机制不完善导致的</p>
</blockquote>
<blockquote>
<p><code>dom0和dom2事件绑定的区别</code>：<br>1.机制不同：<br>dom0采用给私有属性赋值，所以只能绑定一个方法<br>dom2采用的是事件池机制，能绑定多个不同的方法<br>2.移除的操作不同：<br>box.onclick=function(){};<br>box.onclick=null;赋值为null就移除了<br>box.addEventListener(‘click’,function(){console.log(1)},false);<br>box.removeEventListener(‘click’,function(){console.log(1)},false);<br>dom2在移除的时候必须清楚要移除哪一个方法才能在事件池中移除掉所以基于dom2做事件绑定，我们要有瞻前顾后的思路，也就是绑定的时候考虑一下如何移除（技巧不要绑定匿名函数，都绑定实名函数）<br>3.dom2事件绑定中增加了一些domo无法操作的事件行为，例如DOMContentLoaded事件（当页面中的HTML结构加载完成就会触发执行）</p>
</blockquote>
<blockquote>
<p>JQ中的事件绑定<br> on / off：基于DOM2事件绑定实现事件的绑定和移除（兼容了所有的浏览器）<br>one：只绑定一次，第一次执行完成后，会把绑定的方法移除(基于ON/OFF完成的)<br>click / mouseover / mouseout …：JQ提供快捷绑定方法，但是这些方法最后都是基于ON/OFF完成的<br>delegate：事件委托方法（1.7版本以前用的是live方法）<br> bind / unbind：正常绑定<br> <strong>window.onload和$(document).ready()</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">window.onload = function () &#123;</span><br><span class="line">        //=&gt;当页面中的资源都加载完成（HTML结构加载完、CSS和JS等资源加载完成等）才会触发执行</span><br><span class="line">    &#125;;</span><br><span class="line">    // window.addEventListener(&apos;load&apos;,function()&#123;&#125;); //=&gt;这样处理也可以执行多次了</span><br><span class="line"></span><br><span class="line">    //=&gt;$(document).ready(function()&#123;&#125;)</span><br><span class="line">    //原理：基于DOMContentLoaded完成的(IE中用的是onreadystatechange监听的，在document.readyState === &quot;complete&quot;时候执行函数)</span><br><span class="line">    $(function () &#123;</span><br><span class="line">        //=&gt;当页面中的HTML结构加载完成就会执行</span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    $(function()&#123;</span><br><span class="line">        //=&gt;基于DOM2事件绑定的，所以在同一个页面中可以执行多次（绑定多个不同的方法），当结构加载完成，会依次执行这些方法</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h4 id="window-onload和-document-ready-的区别"><a href="#window-onload和-document-ready-的区别" class="headerlink" title="window.onload和$(document).ready()的区别"></a>window.onload和$(document).ready()的区别</h4><blockquote>
<p>window.onload：当浏览器中所有的资源内容（DOM结构、文本内容、图片…）都加载完成，触发load事件<br>1、它是基于DOM0事件绑定完成的，所以在同一个页面中只能给它绑定一个方法（绑定多个也以最后一个绑定的为主）</p>
<p>2、如果想在一个页面中使用多次，我们应该是基于DOM2事件绑定的<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//=&gt;第一件事情</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn2</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//=&gt;第二件事情</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>,fn1,<span class="literal">false</span>);</span><br><span class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>,fn2,<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>\$(function(){}) 或者 $(document).ready(function(){})<br>当文档中的DOM结构加载完成就会被触发执行，而且在同一个页面中可以使用多次</p>
<p>1、JQ中提供的方法，JQ是基于DOMContentLoaded这个事件完成这个操作的<br>2、JQ中的事件绑定都是基于DOM2事件绑定完成的<br>3、但是DOMContentLoaded在IE6~8下使用attachEvent也是不支持的，JQ在IE6~8中使用的是readystatechange这个事件处理的</p>
</blockquote>
<h4 id="DOM2事件绑定的兼容处理"><a href="#DOM2事件绑定的兼容处理" class="headerlink" title="DOM2事件绑定的兼容处理"></a>DOM2事件绑定的兼容处理</h4><blockquote>
<p>语法上的兼容处理<br>[标准]<br>curEle.addEventListener(‘type’,fn,false);<br>[IE6~8]<br>curEle.attachEvent(‘ontype’,fn);<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=&gt;ON:给当前元素的某个事件绑定某个方法</span></span><br><span class="line"><span class="keyword">var</span> on = <span class="function"><span class="keyword">function</span> (<span class="params">curEle, type, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.addEventListener) &#123;</span><br><span class="line">        <span class="comment">//=&gt;标准浏览器</span></span><br><span class="line">        curEle.addEventListener(type, fn, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//=&gt;IE6~8</span></span><br><span class="line">    curEle.attachEvent(<span class="string">'on'</span> + type, fn);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt;OFF:移除当前元素某个事件绑定的某个方法</span></span><br><span class="line"><span class="keyword">var</span> off = <span class="function"><span class="keyword">function</span> (<span class="params">curEle, type, fn</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.removeEventListener) &#123;</span><br><span class="line">        curEle.removeEventListener(type, fn, <span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//=&gt;IE6~8</span></span><br><span class="line">    curEle.detachEvent(<span class="string">'on'</span> + type, fn);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure></p>
</blockquote>
<blockquote>
<p>除了语法上的区别，在处理的机制上有一些区别</p>
<p>在IE6~8中使用attachEvent做事件绑定（把方法存放在当前元素指定事件类型的事件池中）</p>
<p>1、顺序问题：当事件行为触发，执行对应事件池中存放方法的时候，IE低版本浏览器执行方法的顺序是乱序（标准浏览器是按照绑定的先后顺序依次执行的）</p>
<p>2、重复问题：IE低版本浏览器在向事件池中增加方法的时候，没有去重机制，哪怕当前方法已经存放过了，还会重复的添加进去（标准浏览器的事件池机制很完善，可以自动去重：已经存在过的方法不允许在添加进来）</p>
<p>3、THIS问题：IE低版本浏览器中，当事件行为触发，把事件池中方法执行，此时方法中的this指向window，而不是像标准浏览器一样，指向当前元素本身</p>
<p>究其根本：其实都是IE低版本浏览器对于它内置事件池处理机制的不完善导致的</p>
<p>DOM2事件绑定兼容处理的原理：告别LOW的IE6~8的内置事件池，而是自己创建一个类似于标准浏览器的“自定义事件池”，标准浏览器不需要处理兼容，只有IE6~8中才需要处理兼容</p>
</blockquote>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/22/轮播图/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tiandali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tiandali">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/22/轮播图/" itemprop="url">轮播图</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-22T01:11:53+08:00">
                2018-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="常见轮播图"><a href="#常见轮播图" class="headerlink" title="常见轮播图"></a>常见轮播图</h3><h4 id="html"><a href="#html" class="headerlink" title="html"></a>html</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/reset.min.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"css/轮播图.css"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--section.container#container&gt;(div.wrapper&gt;div&gt;img[src='img/banner1.jpg'])+(ul.focus&gt;li.active+li*3)+(a[href='javascript:;'].arrow*2)--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">class</span>=<span class="string">"container"</span> <span class="attr">id</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"wrapper"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;div class="slide"&gt;&lt;img src="img/banner1.jpg" alt=""&gt;&lt;/div&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;div class="slide"&gt;&lt;img src="img/banner2.jpg" alt=""&gt;&lt;/div&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;div class="slide"&gt;&lt;img src="img/banner3.jpg" alt=""&gt;&lt;/div&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;div class="slide"&gt;&lt;img src="img/banner4.jpg" alt=""&gt;&lt;/div&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"focus"</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;li class="active"&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;li&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;li&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--&lt;li&gt;&lt;/li&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"arrow arrowLeft"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:;"</span> <span class="attr">class</span>=<span class="string">"arrow arrowRight"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"jquery-1.11.3.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/animate2.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/轮播练习4.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="css"><a href="#css" class="headerlink" title="css"></a>css</h4><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span> auto;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1000px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">300px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">4000px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.wrapper</span> <span class="selector-class">.slide</span>&#123;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">1000px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.wrapper</span> <span class="selector-class">.slide</span> <span class="selector-tag">img</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">height</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.focus</span>&#123;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">999</span>;</span><br><span class="line">    <span class="attribute">bottom</span>:<span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateX</span>(-50%);</span><br><span class="line">    <span class="comment">/*//基于css3中的transform变形属性，在不固定宽度的情况下实现水平居中（translateX：让当前元素水平位移）*/</span></span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">rgba</span>(0,0,0,.5);</span><br><span class="line">    border-radius: 10px;//让其值为盒子高度的一半这样长方形的盒子修改为椭圆</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.focus</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>:inline-block;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">0</span> <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#FFF</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.focus</span> <span class="selector-tag">li</span><span class="selector-class">.active</span>&#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#E01D20</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.arrow</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>:<span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>:-<span class="number">22.5px</span>;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">45px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">url</span>(<span class="string">"../img/pre.png"</span>) no-repeat;</span><br><span class="line">    <span class="attribute">opacity</span>:<span class="number">0.3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.arrow</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">    <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.arrow</span><span class="selector-class">.arrowLeft</span>&#123;</span><br><span class="line">    <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-position</span>:<span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.container</span> <span class="selector-class">.arrow</span><span class="selector-class">.arrowRight</span>&#123;</span><br><span class="line">    <span class="attribute">right</span>:<span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background-position</span>:-<span class="number">50px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="js"><a href="#js" class="headerlink" title="js"></a>js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> bannerRender = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> container = <span class="built_in">document</span>.querySelector(<span class="string">".container"</span>);</span><br><span class="line">    <span class="keyword">let</span> wrapper = container.querySelector(<span class="string">".wrapper"</span>);</span><br><span class="line">    <span class="keyword">let</span> focus = container.querySelector(<span class="string">".focus"</span>);</span><br><span class="line">    <span class="keyword">let</span> arrowLeft = container.querySelector(<span class="string">".arrowLeft"</span>);</span><br><span class="line">    <span class="keyword">let</span> arrowRight = container.querySelector(<span class="string">".arrowRight"</span>);</span><br><span class="line">    <span class="keyword">let</span> slideList = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> focusList = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> interval = <span class="number">3000</span>;</span><br><span class="line">    <span class="keyword">let</span> stepIndex = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">let</span> autoTimer = <span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">let</span> queryData = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">            xhr.open(<span class="string">'get'</span>, <span class="string">'json/banner.json'</span>, <span class="literal">true</span>);</span><br><span class="line">            xhr.onreadystatechange = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> (xhr.readyState === <span class="number">4</span> &amp;&amp; xhr.status === <span class="number">200</span>) &#123;</span><br><span class="line">                    Data = <span class="built_in">JSON</span>.parse(xhr.responseText);</span><br><span class="line">                    resolve(Data)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;;</span><br><span class="line">            xhr.send(<span class="literal">null</span>);</span><br><span class="line"></span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> bindHTML = <span class="function"><span class="keyword">function</span> (<span class="params">Data</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> strSlide = <span class="string">``</span>;</span><br><span class="line">        <span class="keyword">let</span> strFocus = <span class="string">``</span>;</span><br><span class="line">        Data.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> &#123;img, desc, link&#125; = item;</span><br><span class="line">            strSlide += <span class="string">`&lt;div class="slide"&gt;&lt;img src="<span class="subst">$&#123;img&#125;</span>" alt="<span class="subst">$&#123;desc&#125;</span>"&gt;&lt;/div&gt;`</span>;</span><br><span class="line">            strFocus += <span class="string">`&lt;li class="<span class="subst">$&#123;index === <span class="number">0</span> ? <span class="string">'active'</span> : <span class="string">''</span>&#125;</span>"&gt;&lt;/li&gt;`</span>;</span><br><span class="line">            wrapper.innerHTML = strSlide;</span><br><span class="line">            focus.innerHTML = strFocus;</span><br><span class="line">            slideList = wrapper.querySelectorAll(<span class="string">".slide"</span>);</span><br><span class="line">            focusList = focus.querySelectorAll(<span class="string">"li"</span>);</span><br><span class="line">            wrapper.appendChild(slideList[<span class="number">0</span>].cloneNode(<span class="literal">true</span>));</span><br><span class="line">            slideList = wrapper.querySelectorAll(<span class="string">".slide"</span>);</span><br><span class="line">            utils.css(wrapper, <span class="string">"width"</span>, (slideList.length) * <span class="number">1000</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> autoMove = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        stepIndex++;</span><br><span class="line">        <span class="keyword">if</span> (stepIndex &gt;= slideList.length) &#123;</span><br><span class="line">            utils.css(wrapper, <span class="string">'left'</span>, <span class="number">0</span>);</span><br><span class="line">            stepIndex = <span class="number">1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        animate(wrapper, &#123;<span class="attr">left</span>: -(stepIndex) * <span class="number">1000</span>&#125;, <span class="number">200</span>);</span><br><span class="line">        changeFocus();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> changeFocus = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> tempIndex = stepIndex;</span><br><span class="line">        tempIndex === slideList.length - <span class="number">1</span> ? tempIndex = <span class="number">0</span> : <span class="literal">null</span>;</span><br><span class="line">        [].forEach.call(focusList, (item, index) =&gt; &#123;</span><br><span class="line">            item.className = index === tempIndex ? <span class="string">'active'</span> : <span class="string">''</span>;</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> handleContainer = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        container.onmouseenter = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            clearInterval(autoTimer);</span><br><span class="line">            utils.css(arrowLeft, <span class="string">'display'</span>, <span class="string">'block'</span>);</span><br><span class="line">            utils.css(arrowRight, <span class="string">'display'</span>, <span class="string">'block'</span>);</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line">        container.onmouseleave = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            autoTimer = setInterval(autoMove, interval);</span><br><span class="line">            utils.css(arrowLeft, <span class="string">'display'</span>, <span class="string">'none'</span>);</span><br><span class="line">            utils.css(arrowRight, <span class="string">'display'</span>, <span class="string">'none'</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> handleFocus = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        [].forEach.call(focusList, (item, index) =&gt; &#123;</span><br><span class="line">            item.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//如果当前展示的是最后一个slide我们应该让其立即运动到真实的第一个slide然后再按照点击的索引进行切换（防止当前处于克隆的那一张点击某一个索引是向回拉的运动）</span></span><br><span class="line">               <span class="keyword">if</span>(stepIndex===slideList.length<span class="number">-1</span>)&#123;</span><br><span class="line">                   utils.css(wrapper,<span class="string">'left'</span>,<span class="number">0</span>);</span><br><span class="line">                   stepIndex=<span class="number">0</span>;</span><br><span class="line">               &#125;</span><br><span class="line">                <span class="comment">//如果当前点击的索引和展示的slide是同一个，不需要执行动画（因为正展示这一张，没必要处理）</span></span><br><span class="line">                <span class="keyword">if</span>(index===stepIndex)&#123;</span><br><span class="line">                   utils.css(wrapper,<span class="string">'left'</span>,-(stepIndex)*<span class="number">1000</span>);</span><br><span class="line">                   <span class="keyword">return</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                stepIndex = index;</span><br><span class="line">                animate(wrapper, &#123;<span class="attr">left</span>: -(stepIndex) * <span class="number">1000</span>&#125;, <span class="number">200</span>);</span><br><span class="line">                changeFocus();</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> handleArrow = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        arrowRight.onclick = autoMove;</span><br><span class="line">        arrowLeft.onclick = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            stepIndex--;</span><br><span class="line">            <span class="keyword">if</span> (stepIndex &lt; <span class="number">0</span>) &#123;</span><br><span class="line">                utils.css(wrapper, <span class="string">'left'</span>, -(slideList.length - <span class="number">1</span>) * <span class="number">1000</span>);</span><br><span class="line">                stepIndex = slideList.length - <span class="number">2</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            animate(wrapper, &#123;<span class="attr">left</span>: -(stepIndex) * <span class="number">1000</span>&#125;, <span class="number">200</span>);</span><br><span class="line">            changeFocus();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">        init: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">let</span> promise = queryData();</span><br><span class="line">            promise.then(bindHTML).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                autoTimer = setInterval(autoMove, interval)</span><br><span class="line">            &#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                handleContainer();</span><br><span class="line">                handleFocus();</span><br><span class="line">                handleArrow();</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)();</span><br><span class="line">bannerRender.init();</span><br></pre></td></tr></table></figure>
<h4 id="要用到的一些方法：css-animate"><a href="#要用到的一些方法：css-animate" class="headerlink" title="要用到的一些方法：css,animate"></a>要用到的一些方法：css,animate</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> utils = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> getCss = <span class="function"><span class="keyword">function</span> (<span class="params">ele, attr</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">"getComputedStyle"</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span><br><span class="line">           <span class="keyword">let</span> val = <span class="built_in">window</span>.getComputedStyle(ele)[attr];</span><br><span class="line">            reg = <span class="regexp">/^-?\d+(\.\d+)?(px|pt|rem|em)?$/</span>;</span><br><span class="line">            reg.test(val) ? val = <span class="built_in">parseFloat</span>(val) : <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">return</span> val</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> setCss = <span class="function"><span class="keyword">function</span> (<span class="params">ele, attr, value</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!<span class="built_in">isNaN</span>(value))&#123;</span><br><span class="line">        <span class="keyword">if</span> (!<span class="regexp">/^(opacity|z-index)$/</span>.test(attr)) &#123;</span><br><span class="line">           value += <span class="string">"px"</span>;</span><br><span class="line">        &#125;&#125;</span><br><span class="line">        ele[<span class="string">'style'</span>][attr] = value;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> setGroupCss = <span class="function"><span class="keyword">function</span> (<span class="params">ele, options</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">in</span> options) &#123;</span><br><span class="line">            <span class="keyword">if</span>(options.hasOwnProperty(attr))&#123;</span><br><span class="line">            setCss(ele, attr, options[attr])</span><br><span class="line">        &#125;&#125;</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> css = <span class="function"><span class="keyword">function</span> (<span class="params">...arg</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> len = arg.length,</span><br><span class="line">            fn = getCss;</span><br><span class="line">        len &gt;= <span class="number">3</span> ? fn = setCss : <span class="literal">null</span>;</span><br><span class="line">        (len === <span class="number">2</span> &amp;&amp; <span class="keyword">typeof</span> arg[<span class="number">1</span>] === <span class="string">'object'</span>) ? fn = setGroupCss : <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">return</span> fn(...arg);</span><br><span class="line"></span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">let</span> each = <span class="function"><span class="keyword">function</span> (<span class="params">obj, callback</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="string">'length'</span> <span class="keyword">in</span> obj) &#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; obj.length; i++) &#123;</span><br><span class="line">                <span class="keyword">let</span> item = obj[i];</span><br><span class="line">                <span class="keyword">let</span> res = callback &amp;&amp; callback.call(item, i, item);</span><br><span class="line">                <span class="keyword">if</span> (res === <span class="literal">false</span>) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">in</span> obj) &#123;</span><br><span class="line">            <span class="keyword">if</span>(obj.hasOwnProperty(attr))&#123;</span><br><span class="line">                <span class="keyword">let</span> item=obj[attr];</span><br><span class="line">                <span class="keyword">let</span> res=callback&amp;&amp;callback.call(item,attr,item);</span><br><span class="line">                <span class="keyword">if</span>(res===<span class="literal">false</span>)&#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">return</span> &#123;css, each&#125;</span><br><span class="line">&#125;)();</span><br><span class="line">~<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> effect= &#123;</span><br><span class="line">        Linear:<span class="function">(<span class="params">time,duration,change,begin</span>)=&gt;</span>time/duration*change+begin</span><br><span class="line">    &#125;;</span><br><span class="line"><span class="built_in">window</span>.animate=<span class="function"><span class="keyword">function</span> (<span class="params">ele,target,duration=<span class="number">1000</span>,callback</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> time=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> begin=&#123;&#125;;</span><br><span class="line">        <span class="keyword">let</span> change=&#123;&#125;;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> duration===<span class="string">'function'</span>)&#123;</span><br><span class="line">            callback=duration;</span><br><span class="line">            duration=<span class="number">1000</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        utils.each(target,(key,value)=&gt;&#123;</span><br><span class="line">            begin[key]=utils.css(ele,key);</span><br><span class="line">            change[key]=target[key]-begin[key];</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line">        clearInterval(ele.animateTimer)</span><br><span class="line">         ele.animateTimer=setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            time+=<span class="number">17</span>;</span><br><span class="line">           <span class="keyword">if</span>(time&gt;duration)&#123;</span><br><span class="line">               clearInterval(ele.animateTimer);</span><br><span class="line">               utils.css(ele,target);</span><br><span class="line">               callback&amp;&amp;callback.call(ele);</span><br><span class="line">               <span class="keyword">return</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           utils.each(target,(key,value)=&gt;&#123;</span><br><span class="line">               <span class="keyword">let</span> cur=effect.Linear(time,duration,change[key],begin[key]);</span><br><span class="line">               utils.css(ele,key,cur);</span><br><span class="line">           &#125;)</span><br><span class="line"></span><br><span class="line">        &#125;,<span class="number">17</span>)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;();</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/22/animate/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tiandali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tiandali">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/22/animate/" itemprop="url">animate</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-22T01:11:39+08:00">
                2018-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h2><h3 id="1-css3动画（transition-animation）"><a href="#1-css3动画（transition-animation）" class="headerlink" title="1.css3动画（transition/animation）"></a>1.css3动画（transition/animation）</h3><ul>
<li>transition：是过渡动画</li>
<li>animation：帧动画</li>
<li>transform是变形不是动画（经常依托某一种动画让元素在一定时间内实现变形效果）</li>
</ul>
<h3 id="2-js动画"><a href="#2-js动画" class="headerlink" title="2.js动画"></a>2.js动画</h3><ul>
<li>定时器</li>
<li>requestAnimationFrame</li>
<li>所谓的canvas动画就是js基于定时器完成的（canvas是一个HTML标签，可以理解为是一个画布，我们可以基于js在画布上绘制图像和效果）</li>
</ul>
<h3 id="3-flash动画（actionScript）"><a href="#3-flash动画（actionScript）" class="headerlink" title="3.flash动画（actionScript）"></a>3.flash动画（actionScript）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">//=&gt;需求：让BOX盒子从最左边运动到最右边(结束) [修改BOX的LEFT值即可]</span><br><span class="line">let minL = 0,</span><br><span class="line">    maxL = document.documentElement.clientWidth - box.offsetWidth;</span><br><span class="line"></span><br><span class="line">//=&gt;[固定步长的匀速运动]</span><br><span class="line">// let step = 5,</span><br><span class="line">//     autoTimer = setInterval(() =&gt; &#123;</span><br><span class="line">//         let curL = box.offsetLeft;//=&gt;我们用左偏移临时代替一下LEFT值</span><br><span class="line">//         curL += step;</span><br><span class="line">//         if (curL &gt;= maxL) &#123;</span><br><span class="line">//             //=&gt;固定步长的情况下做边界判断：都是先加上步长在做判断，验证我如果走这一步会不会超，如果超了，我们直接运动到末尾即可，没超才走一步</span><br><span class="line">//             box.style.left = maxL + &apos;px&apos;;</span><br><span class="line">//             clearInterval(autoTimer);</span><br><span class="line">//             return;</span><br><span class="line">//         &#125;</span><br><span class="line">//         box.style.left = curL + &apos;px&apos;;</span><br><span class="line">//     &#125;, 17);//=&gt;17/13MS都是比较好的动画执行时间（浏览器不会出现卡顿）</span><br><span class="line"></span><br><span class="line">//=&gt;[固定时间的匀速运动]</span><br><span class="line">let duration = 1000,//=&gt;总时间</span><br><span class="line">    interval = 17,//=&gt;频率:多长时间迈一步</span><br><span class="line">    begin = 0,//=&gt;起始位置</span><br><span class="line">    target = maxL,//=&gt;目标位置</span><br><span class="line">    change = target - begin,//=&gt;总距离：目标值(TARGET)-起始值(BEGIN)</span><br><span class="line">    time = 0;//=&gt;已经运动的时间</span><br><span class="line">let autoTimer = setInterval(() =&gt; &#123;</span><br><span class="line">    //=&gt;根据公式计算出当前盒子应有的位置</span><br><span class="line">    time += interval;//=&gt;time+=17;</span><br><span class="line">    if (time &gt;= duration) &#123;</span><br><span class="line">        //=&gt;当前运动的时间超过总时间：到达边界</span><br><span class="line">        box.style.left = target + &apos;px&apos;;</span><br><span class="line">        clearInterval(autoTimer);</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    let curL = time / duration * change + begin;</span><br><span class="line">    box.style.left = curL + &apos;px&apos;;</span><br><span class="line">&#125;, interval);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//1.第一种思路：步长=总距离/总时间*频率，剩下变为固定步长的匀速运动了</span><br><span class="line">//2.在JS中基于定时器完成动画，不论是固定步长还是固定时间，只要算出当前盒子应该运动的位置即可(新的位置信息)</span><br><span class="line"></span><br><span class="line">//t:TIME当前运动的时间</span><br><span class="line">//d:DURATION总时间</span><br><span class="line">//b:BEGIN起始位置</span><br><span class="line">//c:CHANGE总距离 (TARGET-BEGIN)</span><br><span class="line">// t/d:当前已经运动的时间/总时间 =&gt;当前动画完成的百分比</span><br><span class="line">// t/d*c:当前动画完成的百分比*总距离 =&gt;当前已经走的距离</span><br><span class="line">// t/d*c+b:当前走的距离+盒子的起始位置 =&gt;当前盒子应该有的位置</span><br></pre></td></tr></table></figure>
<h3 id="封装animate"><a href="#封装animate" class="headerlink" title="封装animate"></a>封装animate</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">~<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> utils = (<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> getCss = <span class="function">(<span class="params">ele, attr</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="string">'getComputedStyle'</span> <span class="keyword">in</span> <span class="built_in">window</span>) &#123;</span><br><span class="line">                reg = <span class="regexp">/^-?\d+(\.\d+)?(px|pt|rem|em)?$/</span>;</span><br><span class="line">                <span class="keyword">let</span> val = <span class="built_in">window</span>.getComputedStyle(ele, <span class="literal">null</span>)[attr];</span><br><span class="line">                reg.test(val) ? val = <span class="built_in">parseFloat</span>(val) : <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">return</span> val;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">let</span> setCss = <span class="function">(<span class="params">ele, attr, value</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!<span class="built_in">isNaN</span>(value)) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!<span class="regexp">/^(opacity|z-index)$/</span>.test(attr)) &#123;</span><br><span class="line">                    value += <span class="string">'px'</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">                ele[<span class="string">'style'</span>][attr] = value;</span><br><span class="line"></span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">let</span> setGroupCss=<span class="function">(<span class="params">ele,option</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">in</span> option) &#123;</span><br><span class="line">                <span class="keyword">if</span>(option.hasOwnProperty(attr))&#123;</span><br><span class="line">                    setCss(ele,attr,option[attr]);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">let</span> css=<span class="function">(<span class="params">...arg</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">let</span> len=arg.length;</span><br><span class="line">            <span class="keyword">let</span> fn=getCss;</span><br><span class="line">           len&gt;=<span class="number">3</span>?fn=setCss:<span class="literal">null</span>;</span><br><span class="line">            (len===<span class="number">2</span>&amp;&amp;<span class="keyword">typeof</span> arg[<span class="number">1</span>]===<span class="string">'object'</span>)?fn=setGroupCss:<span class="literal">null</span>;</span><br><span class="line">           <span class="keyword">return</span> fn(...arg);</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="keyword">return</span>&#123;css&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;)();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*运动公式*/</span></span><br><span class="line">    <span class="keyword">let</span> effect=&#123;</span><br><span class="line">        Linear:<span class="function">(<span class="params">time,duration,change,begin</span>)=&gt;</span>&#123;</span><br><span class="line">            <span class="keyword">return</span> time/duration*change+begin;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">window</span>.animate=<span class="function"><span class="keyword">function</span> (<span class="params">ele,target=&#123;&#125;,duration=<span class="number">1000</span>,callback=new Function(</span>)) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(duration===<span class="string">'function'</span>)&#123;</span><br><span class="line">            callback=duration;</span><br><span class="line">            duration=<span class="number">1000</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> time=<span class="number">0</span>,</span><br><span class="line">            begin=&#123;&#125;,</span><br><span class="line">            change=&#123;&#125;;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">in</span> target) &#123;</span><br><span class="line">            begin[attr]=utils.css(ele,attr);</span><br><span class="line">            change[attr]=target[attr]-begin[attr];</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        clearInterval(ele.animateTimer);</span><br><span class="line">        ele.animateTimer=setInterval(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            time+=<span class="number">17</span>;</span><br><span class="line">            <span class="keyword">if</span>(time&gt;=duration)&#123;</span><br><span class="line">               utils.css(ele,target);</span><br><span class="line">               clearInterval(ele.animateTimer);</span><br><span class="line">               callback.call(ele);</span><br><span class="line">               <span class="keyword">return</span>;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> cur=&#123;&#125;;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">let</span> attr <span class="keyword">in</span> target) &#123;</span><br><span class="line">                <span class="keyword">if</span>(target.hasOwnProperty(attr))&#123;</span><br><span class="line">                    cur[attr]=effect.Linear(time,duration,change,begin)</span><br><span class="line">                &#125; &#125;</span><br><span class="line">                utils.css(ele,cur);</span><br><span class="line"></span><br><span class="line">        &#125;,<span class="number">17</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;();</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/22/promise/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tiandali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tiandali">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/22/promise/" itemprop="url">promise</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-22T01:11:24+08:00">
                2018-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="promise"><a href="#promise" class="headerlink" title="promise"></a>promise</h4><p>他是es6中新增加的类，（new promise）为了管理js中的异步编程的，也称为promise设计模式。<br>三个状态：<br>pendding(准备：初始化成功)<br>fulfilled（成功）<br>rejected（失败）</p>
<ul>
<li><p>Promise是ES6中新增加的内置类：目的是为了管理异步操作的<br> 1.new Promise() 创建类的一个实例，每一个实例都可以管理一个异步操作<br>  -&gt;必须传递一个回调函数进去（回调函数中管理你的异步操作）,不传递会报错<br>  -&gt;回调函数中会有两个参数</p>
<pre><code>resolve：异步操作成功做的事情（代指成功后的事件队列 =&gt;成功后要做的所有的事情都存放到成功这个事件队列中）
reject：异步操作失败做的事情（代指失败后的事件队列）
</code></pre><p>  -&gt;new Promise的时候立即把回调函数执行了（Promise是同步的）</p>
<p>2.基于Promise.prototype.then方法（还有catch/finally两个方法）向成功队列和失败队列中依次加入需要处理的事情</p>
<p>3.如果是多个THEN掉用，不是像我们想象的依次把增加的方法执行<br>  异步操作成功或者失败，先把第一个THEN中的方法执行，每当执行一个THEN会返回一个新的Promise实例，这个实例管控的是第一个THEN中方法执行的是成功还是失败</p>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve,reject</span>)=&gt;</span>&#123;</span><br><span class="line"><span class="comment">//resolve:当异步操作执行成功，我们执行resolve方法</span></span><br><span class="line"><span class="comment">//reject：当异步操作执行失败，我们执行reject方法</span></span><br><span class="line"><span class="comment">//执行一个一步的任务（new promise的时候创建一个promise实例立即把当前函数体中的异步操作执行）promise本身是同步的，他可以管理异步操作，</span></span><br><span class="line">setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;resolve(<span class="number">100</span>)&#125;,<span class="number">1000</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span>);<span class="comment">//先输出1；</span></span><br><span class="line">&#125;).then(<span class="function">(<span class="params">resolve</span>)=&gt;</span>&#123;<span class="built_in">console</span>.log(<span class="string">'ok'</span>)&#125;,(reject)=&gt;&#123;<span class="built_in">console</span>.log(<span class="string">'no'</span>)&#125;);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">2</span>);<span class="comment">//在输出2；</span></span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=&gt;建议不要使用THEN中的第二个参数（这样看起来很乱），而是建议我们使用Promise.prototype.catch来管理失败的情况</span></span><br><span class="line"><span class="keyword">let</span> promise1 = <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    $.ajax(&#123;</span><br><span class="line">        url: <span class="string">'json/data2.json'</span>,</span><br><span class="line">        success(result) &#123;</span><br><span class="line">            resolve(result);</span><br><span class="line">        &#125;,</span><br><span class="line">        error(msg) &#123;</span><br><span class="line">            reject(<span class="string">'no'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">promise1.then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'THEN1 OK'</span>, result);</span><br><span class="line">    <span class="number">100</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">100</span>;</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">msg</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">//=&gt;第一个CATCH</span></span><br><span class="line">    <span class="comment">//1.异步请求失败会执行它</span></span><br><span class="line">    <span class="comment">//2.第一个THEN方法失败也会执行它</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'CATCH1'</span>, msg);</span><br><span class="line">&#125;).then(<span class="function"><span class="params">result</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'THEN2 OK'</span>, result);</span><br><span class="line">&#125;).catch(<span class="function"><span class="params">msg</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'CATCH2'</span>, msg);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=&gt;JS中的异常捕获（目的：把抛出异常的错误捕获到，不让其阻断浏览器的继续执行）</span></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="comment">//=&gt;正常执行的JS代码(可能会报错)</span></span><br><span class="line">    <span class="number">1</span>();</span><br><span class="line">&#125; <span class="keyword">catch</span> (e) &#123;</span><br><span class="line">    <span class="comment">//=&gt;TRY中的代码报错了会执行CATCH</span></span><br><span class="line">    <span class="built_in">console</span>.log(e.message);</span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">    <span class="comment">//=&gt;不管TRY中的代码成功还是失败都会执行</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> A = <span class="function"><span class="keyword">function</span> <span class="title">A</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            resolve();</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> B = <span class="function"><span class="keyword">function</span> <span class="title">B</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> &#123;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            resolve();</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> promise = A();</span><br><span class="line">promise.then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">return</span> B();<span class="comment">//=&gt;如果方法中返回的一个具体值，而且执行中没有错误异常，会立即执行下一个THEN中的方法（不写RETURN也是返回的了具体值：undefined），但是如果返回的是一个PROMISR实例（并且管控了一个异步操作），只能等PROMISE完成，把成功后的结果当做具体的值返回，才能进入下一个函数执行</span></span><br><span class="line">&#125;).then(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/05/22/回调函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="tiandali">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="tiandali">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/05/22/回调函数/" itemprop="url">回调函数</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-05-22T01:11:12+08:00">
                2018-05-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="回调函数"><a href="#回调函数" class="headerlink" title="回调函数"></a>回调函数</h3><blockquote>
<p>把一个函数当做实参值传递给函数的形参变量(或者传递给函数，通过arguments获取)，在另外一个函数中把传递的函数执行，这种机制就是回调函数机制</p>
<p>凡是在某一个函数的某一个阶段需要完成某一件事情（而这件事情是不确定的），都可以利用回调函数机制，把需要处理的事情当做值传递进来</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">num,callBack</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//=&gt;callBack：传递进来的回调函数</span></span><br><span class="line">	<span class="keyword">typeof</span> callBack===<span class="string">'function'</span>?callBack():<span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">	callBack &amp;&amp; callBack();<span class="comment">//=&gt;这种方式默认就是，要不然不传递参数，传递的话参数值肯定是函数</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fn(<span class="number">10</span>);</span><br><span class="line">fn(<span class="number">20</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="comment">//=&gt;此处的匿名函数就是给callBack传递的值</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>既然我们已经把函数作为值传递给FN了，此时在FN中我们可以尽情的操作传递的函数<br>1、我们可以在FN中把回调函数执行 0~N 次<br>2、我们还可以给回调函数传递参数值<br>3、我们还可以把回调函数中的THIS进行修改<br>4、我们还可以接收回调函数执行返回的值<br>…</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//=&gt;需求:执行FN可以实现任意数求和,把求出的和传递给回调函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params">callBack</span>) </span>&#123;</span><br><span class="line">    <span class="comment">//-&gt;把ARG中的除第一项以外的参数值获取到,并且转变为数组（并且给数求和）</span></span><br><span class="line">    <span class="keyword">var</span> argNumAry = <span class="built_in">Array</span>.prototype.slice.call(<span class="built_in">arguments</span>, <span class="number">1</span>),</span><br><span class="line">        total = <span class="built_in">eval</span>(argNumAry.join(<span class="string">'+'</span>));</span><br><span class="line">    <span class="comment">//-&gt;执行回调函数，把求出的和当做实参传递给回调函数，并且回调函数中的this指向</span></span><br><span class="line">    <span class="keyword">typeof</span> callBack === <span class="string">'function'</span> ? callBack.call(fn, total) : <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> total=<span class="literal">null</span>;</span><br><span class="line">fn(<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(result, <span class="keyword">this</span>);<span class="comment">//=&gt;100 FN</span></span><br><span class="line">    total=result;</span><br><span class="line">&#125;, <span class="number">10</span>, <span class="number">20</span>, <span class="number">30</span>, <span class="number">40</span>);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>我们之前学习的知识点中，很多方法都是依托于回调函数来完成的<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> ary=[<span class="number">12</span>,<span class="number">23</span>,<span class="number">34</span>];</span><br><span class="line">ary.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a,b</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//-&gt;a:当前项</span></span><br><span class="line">	<span class="comment">//-&gt;b:后一项</span></span><br><span class="line">	<span class="keyword">return</span> a-b;<span class="comment">//-&gt;返回一个大于零的值,a和b的位置进行交换</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ary.forEach(<span class="function"><span class="keyword">function</span>(<span class="params">item,index,input</span>)</span>&#123;</span><br><span class="line">	<span class="comment">//-&gt;item:当前遍历的这一项</span></span><br><span class="line">	<span class="comment">//-&gt;index:当前遍历这一项的索引</span></span><br><span class="line">	<span class="comment">//-&gt;input:原始遍历的数组</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//=&gt;FOR-EACH每当循环遍历到数组中的某一项，都会把传递的回调函数执行一次（不仅执行还把遍历的这一项的值传递给回调函数）</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">//=&gt;MAP遍历数组中的每一项,原有数组不变,返回的结果是修改后的新数组（MAP相当于FOR-EACH来说，增加了对原有项的修改）</span></span><br><span class="line"><span class="keyword">var</span> newAry = ary.map(<span class="function"><span class="keyword">function</span> (<span class="params">item,index,input</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">return</span> item*<span class="number">10</span>;<span class="comment">//=&gt;回调函数中返回的是啥，相当于把当前遍历这一项修改为啥（回调函数中不写RETURN，默认返回的是undefined）</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> str=<span class="string">'zhufeng2017peixun2018'</span>;</span><br><span class="line">str=str.replace(<span class="regexp">/\d+/g</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">	<span class="keyword">return</span> <span class="string">'@'</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="回调函数中的this指向问题"><a href="#回调函数中的this指向问题" class="headerlink" title="回调函数中的this指向问题"></a>回调函数中的this指向问题</h3><blockquote>
<p>回调函数中的this一般都是window（或者在严格模式下是undefined），原因：</p>
<p>我们一般在执行回调函数的时候，都是直接的把它执行了，没有特意指定执行主体或者使用call改变this，所以默认一般都是window</p>
</blockquote>
<p><code>有关定时器回调函数中this的处理</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>: <span class="string">'珠峰培训'</span>, <span class="attr">fn</span>: fn&#125;;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">&#125;</span><br><span class="line">setTimeout(fn, <span class="number">1000</span>);<span class="comment">//=&gt;非严格模式或者严格模式下FN中的THIS都是WINDOW</span></span><br><span class="line">setTimeout(fn.call(obj), <span class="number">1000</span>);<span class="comment">//=&gt;设置定时器的时候就把FN执行了,把FN的返回结果赋值给定时器(1S后执行的是UNDEFINED)</span></span><br><span class="line">setTimeout(obj.fn, <span class="number">1000</span>);<span class="comment">//=&gt;FN中的THIS还是WINDOW</span></span><br><span class="line">setTimeout(fn.bind(obj), <span class="number">1000</span>);<span class="comment">//=&gt;FN中的THIS都是OBJ</span></span><br><span class="line">setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//=&gt;this:window</span></span><br><span class="line">    fn.call(obj);</span><br><span class="line">&#125;, <span class="number">1000</span>);<span class="comment">//=&gt;FN中的THIS都是OBJ</span></span><br></pre></td></tr></table></figure></p>
<p><code>数组中方法回调函数中this指向问题</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> obj = &#123;<span class="attr">name</span>: <span class="string">'珠峰培训'</span>&#125;;</span><br><span class="line"><span class="keyword">var</span> ary = [<span class="number">12</span>, <span class="number">23</span>, <span class="number">34</span>, <span class="number">45</span>];</span><br><span class="line">ary.sort(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);<span class="comment">//=&gt;WINDOW(严格模式下是UNDEFINED)</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">ary.forEach(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);<span class="comment">//=&gt;WINDOW(严格模式下是UNDEFINED)</span></span><br><span class="line">&#125;);</span><br><span class="line">ary.forEach(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="keyword">this</span>);<span class="comment">//=&gt;OBJ</span></span><br><span class="line">&#125;, obj);<span class="comment">//=&gt;FOR-EACH 和 MAP 这两个内置方法,除了第一个参数是回调函数以外，第二个参数是改变回调函数中的THIS指向的 (SOME、FILTER、FIND、EVERY... 这些方法的第二个参数都是改变回调函数中THIS的)</span></span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">tiandali</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">32</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tiandali</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
